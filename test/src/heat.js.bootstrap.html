<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" user-scalable="no" />
        <title>Heat.js - Bootstrap</title>
        <link rel="stylesheet" href="../css/styles.css" />
        <link rel="stylesheet" href="../../dist/heat.js.css" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
        <script src="../../src/heat.js"></script>
    </head>

    <body>
        <div class="header">
            <h1 id="header">Heat.js - Bootstrap</h1>
            <p>This is a basic example of how to use Heat.js to create a basic heatmap, alongside Bootstrap.</p>
        </div>

        <div class="contents">
            <div id="heat-map-1" data-heat-options="{ 'onDayClick': onDayClick, 'showMonthDayGaps': true }"></div>
            <br>
            <br>
            <div id="heat-map-2" data-heat-options="{ 'onDayClick': onDayClick, 'showMonthDayGaps': false, 'showRefreshButton': true, 'showExportButton': true }"></div>
        </div>

        <div class="contents">
            <h2>Manage Dates:</h2>
            <button class="btn btn-primary" onclick="updateDates( false );">Add Dates</button>
            <button class="btn btn-primary" onclick="updateDatesFixed( false );">Add Date [Fixed]</button>
            <button class="btn btn-primary" onclick="updateDates( true );">Remove Dates</button>
            <button class="btn btn-primary" onclick="updateDatesFixed( true );">Remove Dates [Fixed]</button>
            <button class="btn btn-primary" onclick="$heat.reset( 'heat-map-1' );">Reset (1)</button>
            <button class="btn btn-primary" onclick="$heat.reset( 'heat-map-2' );">Reset (2)</button>
            <br />

            <h2>Manage Instances:</h2>
            <button class="btn btn-primary" onclick="$heat.refresh( 'heat-map-1' );">Refresh (1)</button>
            <button class="btn btn-primary" onclick="$heat.refresh( 'heat-map-2' );">Refresh (2)</button>
            <button class="btn btn-primary" onclick="$heat.refreshAll();">Refresh All</button>
            <br />

            <h2>Destroy:</h2>
            <button class="btn btn-primary" onclick="$heat.destroy( 'heat-map-1' );">Destroy (1)</button>
            <button class="btn btn-primary" onclick="$heat.destroy( 'heat-map-2' );">Destroy (2)</button>
            <button class="btn btn-primary" onclick="$heat.destroyAll();">Destroy All</button>
            <br />

            <h2>Configuration:</h2>
            <button class="btn btn-primary" onclick="setupConfiguration();">Set Configuration</button>
            <br />

            <h2>Additional Data:</h2>
            <button class="btn btn-primary" onclick="console.log( $heat.getVersion() );">Get Version</button>
        </div>
    </body>

    <script>
        document.title += " v" + $heat.getVersion();
        document.getElementById( "header" ).innerText += " - v" + $heat.getVersion();

        function setupConfiguration() {
            $heat.setConfiguration( {
                safeMode: false
            } );
        }

        function updateDatesFixed( remove ) {
            var date = new Date( new Date().getFullYear(), new Date().getMonth(), 1 ),
                dateNumbers = [ 10, 15, 20, 25 ],
                dateNumbersLength = dateNumbers.length;

            for ( var dateNumbersIndex = 0; dateNumbersIndex < dateNumbersLength; dateNumbersIndex++ ) {
                date.setDate( date.getDate() + 2 );

                for ( var dateNumber = 0; dateNumber < dateNumbers[ dateNumbersIndex ]; dateNumber++ ) {
                    addRemoveDates( date, remove );
                }
            }

            $heat.refreshAll();
        }

        function updateDates( remove ) {
            var date = new Date( new Date().getFullYear(), 0, 1 );

            for ( var dayNumber = 0; dayNumber < 5000; dayNumber++ ) {
                var daysToIncrease = Math.floor( Math.random() * 365 ),
                    newDate = new Date( date );

                newDate.setDate( newDate.getDate() + daysToIncrease );

                addRemoveDates( newDate, remove );
            }

            $heat.refreshAll();
        }

        function addRemoveDates( newDate, remove ) {
            if ( !remove ) {
                $heat.addDate( "heat-map-1", newDate, false );
                $heat.addDate( "heat-map-2", newDate, false );
            } else {
                $heat.removeDate( "heat-map-1", newDate, false );
                $heat.removeDate( "heat-map-2", newDate, false );
            }
        }

        function onDayClick( date, count ) {
            console.log( "Day clicked for: " + date.toString() + ", Count: " + count );
        }
    </script>
</html>
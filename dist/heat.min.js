/*! Heat.js v2.4.0 | (c) Bunoon 2024 | MIT License */
(function(){function sa(){for(var a=g.domElementTypes,b=a.length,c=0;c<b;c++){var d=E.getElementsByTagName(a[c]);d=[].slice.call(d);for(var f=d.length,e=0;e<f;e++){var h=d[e],l=!0;if(q(h)&&h.hasAttribute("data-heat-options")){var m=h.getAttribute("data-heat-options");A(m)?(m=la(m),m.parsed&&K(m.result)?ta(ua(m.result,h)):g.safeMode||(console.error("The attribute 'data-heat-options' is not a valid object."),l=!1)):g.safeMode||(console.error("The attribute 'data-heat-options' has not been set correctly."),
l=!1)}if(!l)break}}}function ua(a,b){var c=va(a),d=A(c.view)?c.view.toLowerCase():p.empty;c.currentView={};c.currentView.element=b;c.currentView.tooltip=null;c.currentView.tooltipTimer=null;c.currentView.mapContents=null;c.currentView.mapContentsScrollLeft=0;c.currentView.year=c.year;c.currentView.type=g.unknownTrendText;c.views.chart.enabled&&(c.currentView.chartContents=null,c.currentView.chartContentsScrollLeft=0);c.views.statistics.enabled&&(c.currentView.statisticsContents=null,c.currentView.statisticsContentsScrollLeft=
0);c.currentView.view="map"===d?1:"chart"===d?2:"statistics"===d?3:1;return c}function ta(a){r(a.onBeforeRender,a.currentView.element);A(a.currentView.element.id)||(a.currentView.element.id=S());a.currentView.element.className="heat-js";a.currentView.element.removeAttribute("data-heat-options");wa(a.currentView.element.id,a);y(a);r(a.onRenderComplete,a.currentView.element)}function y(a,b,c){b=q(b)?b:!1;c=q(c)?c:!1;if(b&&(b=a.currentView.element.id,a.useLocalStorageForData&&B.localStorage)){if(a.useLocalStorageForData&&
B.localStorage){for(var d=B.localStorage.length,f=[],e=0;e<d;e++)xa(B.localStorage.key(e),"HJS_"+b)&&f.push(B.localStorage.key(e));d=f.length;for(e=0;e<d;e++)B.localStorage.removeItem(f[e])}f=ba.stringify(k[b].type);B.localStorage.setItem("HJS_"+b,f)}q(a.currentView.mapContents)&&(a.currentView.mapContentsScrollLeft=a.currentView.mapContents.scrollLeft);a.views.chart.enabled&&q(a.currentView.chartContents)&&(a.currentView.chartContentsScrollLeft=a.currentView.chartContents.scrollLeft);a.views.statistics.enabled&&
q(a.currentView.statisticsContents)&&(a.currentView.statisticsContentsScrollLeft=a.currentView.statisticsContents.scrollLeft);a.currentView.element.innerHTML=p.empty;ca(a);Ga(a);Ha(a);e=c;a.currentView.mapContents=n(a.currentView.element,"div","map-contents");ma(a.currentView.mapContents,a);d=n(a.currentView.mapContents,"div","map");b=a.currentView.year;f=!1;e&&w(d,"view-switch");a.views.chart.enabled&&(a.currentView.chartContents=n(a.currentView.element,"div","chart-contents"),ma(a.currentView.chartContents,
a));a.views.statistics.enabled&&(a.currentView.statisticsContents=n(a.currentView.element,"div","statistics-contents"),ma(a.currentView.statisticsContents,a));Ia(a);if(a.views.map.showDayNames){e=n(d,"div","days");if(!a.views.map.showMonthNames||a.views.map.placeMonthNamesOnTheBottom)e.className="days-months-bottom";for(var h=0;7>h;h++)a.views.map.daysToShow.indexOf(h+1)>G.notFound&&u(e,"div","day-name",g.dayNames[h]);a.views.map.showDaysInReverseOrder&&ya(e)}d=n(d,"div","months");e=da(a);for(h=0;12>
h;h++)if(ea(a.views.map.monthsToShow,h)){var l=n(d,"div","month"),m=n(l,"div","day-columns"),F=X(b,h),C=n(m,"div","day-column"),z=!1;var x=na(new Date(b,h,1));var H=1;F+=x;for(var I=0;I<F;I++){I>=x?z=!0:a.views.map.daysToShow.indexOf(H)>G.notFound&&n(C,"div","day-disabled");if(z){var P=null;a.views.map.daysToShow.indexOf(H)>G.notFound&&(P=Ja(a,C,I-x,h,b,e));if(0===(I+1)%7&&(a.views.map.showDaysInReverseOrder&&ya(C),C=n(m,"div","day-column"),H=0,!q(T)&&q(P))){var Ka=fa(P,"margin-left",!0),La=fa(P,
"margin-right",!0);T=P.offsetWidth+Ka+La}}H++}a.views.map.showMonthNames&&(F=l.offsetWidth,m=a.views.map.placeMonthNamesOnTheBottom?u(l,"div","month-name-bottom",g.monthNames[h]):u(l,"div","month-name",g.monthNames[h],m),q(m)&&(m.style.width=a.views.map.showMonthDayGaps?F+"px":F-T+"px"));f&&q(T)&&(0<x&&!a.views.map.showMonthDayGaps?l.style.marginLeft=-T+"px":0===x&&a.views.map.showMonthDayGaps&&(l.style.marginLeft=T+"px"));f=!0}a.keepScrollPositions&&(a.currentView.mapContents.scrollLeft=a.currentView.mapContentsScrollLeft);
if(a.views.chart.enabled){e=c;l=n(a.currentView.chartContents,"div","chart");x=n(l,"div","y-labels");b=n(l,"div","day-lines");f=da(a);d=0;h=Q(a);for(m=0;12>m;m++)for(F=X(a.currentView.year,m),C=0;C<F;C++)z=R(new Date(a.currentView.year,m,C+1)),h.hasOwnProperty(z)&&(d=J.max(d,parseInt(h[z])));m=d;h=a.currentView.year;d=0;e&&w(l,"view-switch");0<m&&a.views.chart.showChartYLabels?(d=u(x,"div","label-0",m.toString()),u(x,"div","label-25",(3*J.floor(m/4)).toString()),u(x,"div","label-50",J.floor(m/2).toString()),
u(x,"div","label-75",J.floor(m/4).toString()),u(x,"div","label-100","0"),x.style.width=d.offsetWidth+"px",d=x.offsetWidth+fa(x,"margin-right",!0)):x.parentNode.removeChild(x);if(0===m)a.currentView.chartContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px",l.parentNode.removeChild(l),b=u(a.currentView.chartContents,"div","no-data-message",g.noChartDataMessage),e&&w(b,"view-switch");else{l=a.currentView.mapContents.offsetHeight/m;for(m=x=e=0;12>m;m++)if(ea(a.views.chart.monthsToShow,
m))for(F=X(h,m),C=1,e++,z=0;z<F;z++)a.views.chart.daysToShow.indexOf(C)>G.notFound&&Ma(b,a,z+1,m,h,f,l),0===(z+1)%7&&(C=0),C++,x++;if(a.views.chart.showMonthNames){f=n(a.currentView.chartContents,"div","chart-months");e=b.offsetWidth/e;for(l=h=0;12>l;l++)ea(a.views.chart.monthsToShow,l)&&(u(f,"div","month-name",g.monthNames[l]).style.left=d+e*h+"px",h++);f.style.width=b.offsetWidth+"px";b=n(f,"div","month-name-space");b.style.height=f.offsetHeight+"px";b.style.width=d+"px"}a.keepScrollPositions&&
(a.currentView.chartContents.scrollLeft=a.currentView.chartContentsScrollLeft)}a.currentView.chartContents.style.display="none"}if(a.views.statistics.enabled){h=n(a.currentView.statisticsContents,"div","statistics");b=n(a.currentView.statisticsContents,"div","statistics-ranges");l=n(h,"div","y-labels");f=n(h,"div","range-lines");d=da(a);e={};x=0;m=Q(a);for(F=e["0"]=0;12>F;F++)for(C=X(a.currentView.year,F),z=0;z<C;z++)H=R(new Date(a.currentView.year,F,z+1)),m.hasOwnProperty(H)&&(I=H.split(p.dash),
I=new Date(I[2],I[1],I[0]),P=na(I),!za(a,I)&&ea(a.views.statistics.monthsToShow,I.getMonth())&&a.views.statistics.daysToShow.indexOf(P)>G.notFound&&(H=oa(a,d,m[H]),q(H)?(e.hasOwnProperty(H.minimum.toString())||(e[H.minimum.toString()]=0),e[H.minimum]++,x=J.max(x,e[H.minimum])):e["0"]++));c&&w(h,"view-switch");0<x&&a.views.statistics.showChartYLabels?(m=u(l,"div","label-0",x.toString()),u(l,"div","label-25",(3*J.floor(x/4)).toString()),u(l,"div","label-50",J.floor(x/2).toString()),u(l,"div","label-75",
J.floor(x/4).toString()),u(l,"div","label-100","0"),l.style.width=m.offsetWidth+"px",b.style.paddingLeft=l.offsetWidth+fa(l,"margin-right",!0)+"px"):l.parentNode.removeChild(l);if(0===x){a.currentView.statisticsContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px";h.parentNode.removeChild(h);b.parentNode.removeChild(b);var U=u(a.currentView.statisticsContents,"div","no-statistics-message",g.noStatisticsDataMessage);c&&w(U,"view-switch")}else{c=a.currentView.mapContents.offsetHeight/
x;a.views.statistics.showColorRangeLabels||b.parentNode.removeChild(b);for(U in e)e.hasOwnProperty(U)&&(Na(U,f,e[U],a,d,c),a.views.statistics.showColorRangeLabels&&u(b,"div","range-name",U+p.plus));a.keepScrollPositions&&(a.currentView.statisticsContents.scrollLeft=a.currentView.statisticsContentsScrollLeft)}a.currentView.statisticsContents.style.display="none"}a.currentView.mapContents.style.display="none";1===a.currentView.view?a.currentView.mapContents.style.display="block":a.views.chart.enabled&&
2===a.currentView.view?a.currentView.chartContents.style.display="block":a.views.statistics.enabled&&3===a.currentView.view?a.currentView.statisticsContents.style.display="block":a.currentView.chartContents.style.display="block"}function wa(a,b,c){c=q(c)?c:!0;k[a]={options:b,type:{},types:1};k[a].type[g.unknownTrendText]={};if(c&&b.useLocalStorageForData&&B.localStorage)for(b=B.localStorage.length,c=0;c<b;c++){var d=B.localStorage.key(c);if(xa(d,"HJS_")&&(d=B.localStorage.getItem(d),d=la(d),d.parsed)){k[a].type=
d.result;k[a].types=0;for(var f in k[a].type)k[a].type.hasOwnProperty(f)&&k[a].types++}}}function Q(a){return k[a.currentView.element.id].type[a.currentView.type]}function ea(a,b){return a.indexOf(b+1)>G.notFound}function Ga(a){q(a.currentView.tooltip)||(a.currentView.tooltip=n(E.body,"div","heat-js-tooltip"),a.currentView.tooltip.style.display="none",E.body.addEventListener("mousemove",function(){ca(a)}),E.addEventListener("scroll",function(){ca(a)}))}function V(a,b,c){null!==a&&(a.onmousemove=function(d){Oa(d,
b,c)})}function Oa(a,b,c){Y(a);ca(b);b.currentView.tooltipTimer=setTimeout(function(){b.currentView.tooltip.innerHTML=c;b.currentView.tooltip.style.display="block";var d=b.currentView.tooltip,f=a.pageX,e=a.pageY;var h=E.documentElement;var l=(B.pageXOffset||h.scrollLeft)-(h.clientLeft||0);h=(B.pageYOffset||h.scrollTop)-(h.clientTop||0);d.style.display="block";f+d.offsetWidth>B.innerWidth?f-=d.offsetWidth:f++;e+d.offsetHeight>B.innerHeight?e-=d.offsetHeight:e++;f<l&&(f=a.pageX+1);e<h&&(e=a.pageY+1);
d.style.left=f+"px";d.style.top=e+"px"},b.tooltipDelay)}function ca(a){q(a.currentView.tooltip)&&(q(a.currentView.tooltipTimer)&&(clearTimeout(a.currentView.tooltipTimer),a.currentView.tooltipTimer=null),"block"===a.currentView.tooltip.style.display&&(a.currentView.tooltip.style.display="none"))}function Ha(a){if(a.showTitle||a.showYearSelector||a.showRefreshButton||a.showExportButton||a.showImportButton){var b=n(a.currentView.element,"div","title-bar"),c=n(b,"div","title");a.views.chart.enabled||
a.views.statistics.enabled?n(c,"div","down-arrow"):w(c,"no-click");a.showTitle&&(c.innerHTML+=a.titleText);if(a.views.chart.enabled||a.views.statistics.enabled){c=n(c,"div","titles-list");c=n(c,"div","titles");var d=u(c,"div","title",g.mapText);pa(a,d,1,"map");a.views.chart.enabled&&(d=u(c,"div","title",g.chartText),pa(a,d,2,"chart"));a.views.statistics.enabled&&(c=u(c,"div","title",g.statisticsText),pa(a,c,3,"statistics"))}a.showImportButton&&(u(b,"button","import",g.importButtonText).onclick=function(){Pa(a)});
a.showExportButton&&(u(b,"button","export",g.exportButtonText).onclick=function(){Aa(a)});a.showRefreshButton&&(u(b,"button","refresh",g.refreshButtonText).onclick=function(){y(a);r(a.onRefresh,a.currentView.element)});if(a.showYearSelector){u(b,"button","back",g.backButtonText).onclick=function(){for(a.currentView.year--;a.yearsToHide.indexOf(a.currentView.year)>G.notFound;)a.currentView.year--;y(a);r(a.onBackYear,a.currentView.year)};a.currentView.yearText=u(b,"div","year-text",a.currentView.year);
if(a.showYearSelectionDropDown){n(a.currentView.yearText,"div","down-arrow");c=n(a.currentView.yearText,"div","years-list");d=n(c,"div","years");var f=(new Date).getFullYear(),e=null;c.style.display="block";c.style.visibility="hidden";for(var h=f-a.extraSelectionYears;h<f+a.extraSelectionYears;h++)if(a.yearsToHide.indexOf(h)===G.notFound){var l=Qa(a,d,h);q(e)||(e=l)}q(e)&&(d.scrollTop=e.offsetTop-d.offsetHeight/2);c.style.display="none";c.style.visibility="visible"}else w(a.currentView.yearText,"no-click");
u(b,"button","next",g.nextButtonText).onclick=function(){for(a.currentView.year++;a.yearsToHide.indexOf(a.currentView.year)>G.notFound;)a.currentView.year++;y(a);r(a.onNextYear,a.currentView.year)}}}}function pa(a,b,c,d){a.currentView.view===c?w(b,"title-active"):b.onclick=function(){a.currentView.view=c;r(a.onViewSwitch,d);y(a,!1,!0)}}function Qa(a,b,c){var d=null;b=u(b,"div","year",c);a.currentView.year!==c?b.onclick=function(){a.currentView.year=c;y(a);r(a.onSetYear,a.currentView.year)}:(w(b,"year-active"),
d=b);return d}function Ja(a,b,c,d,f,e){c+=1;b=n(b,"div","day");var h=new Date(f,d,c),l=k[a.currentView.element.id].type[a.currentView.type][R(h)];l=Z(l)?l:0;L(a.onDayToolTipRender)?V(b,a,r(a.onDayToolTipRender,h,l)):V(b,a,Ba(a.dayToolTipText,h));a.views.map.showDayNumbers&&0<l&&(b.innerHTML=l.toString());L(a.onDayClick)?b.onclick=function(){r(a.onDayClick,h,l)}:w(b,"no-hover");d=oa(a,e,l,h);q(d)&&ha(a,d.id)&&(A(d.mapCssClassName)?w(b,d.mapCssClassName):w(b,d.cssClassName));return b}function Ma(a,
b,c,d,f,e,h){var l=new Date(f,d,c);a=n(a,"div","day-line");var m=Q(b)[R(l)];m=Z(m)?m:0;L(b.onDayToolTipRender)?V(a,b,r(b.onDayToolTipRender,l,m)):V(a,b,Ba(b.dayToolTipText,l));b.views.chart.showLineNumbers&&0<m&&(w(a,"day-line-number"),a.innerHTML=m.toString());h*=m;a.style.height=h+"px";0>=h&&(a.style.visibility="hidden");L(b.onDayClick)?a.onclick=function(){r(b.onDayClick,l,m)}:w(a,"no-hover");e=oa(b,e,m,l);q(e)&&ha(b,e.id)&&(A(e.chartCssClassName)?w(a,e.chartCssClassName):w(a,e.cssClassName))}
function Na(a,b,c,d,f,e){b=n(b,"div","range-line");var h=Ra(f,a);a=c*e;b.style.height=a+"px";0>=a&&(b.style.visibility="hidden");V(b,d,c.toString());L(d.onStatisticClick)?b.onclick=function(){r(d.onStatisticClick,h)}:w(b,"no-hover");q(h)&&ha(d,h.id)&&(A(h.statisticsCssClassName)?w(b,h.statisticsCssClassName):w(b,h.cssClassName))}function Ia(a){var b=n(a.currentView.element,"div","guide"),c=n(b,"div","map-types"),d=0;for(f in k[a.currentView.element.id].type[g.unknownTrendText])if(k[a.currentView.element.id].type[g.unknownTrendText].hasOwnProperty(f)){d++;
break}if(1<k[a.currentView.element.id].types){if(A(a.descriptionText)){var f=n(a.currentView.element,"div","description",b);Ca(a,f)}for(var e in k[a.currentView.element.id].type)if(e!==g.unknownTrendText||0<d)0===d&&a.currentView.type===g.unknownTrendText&&(a.currentView.type=e),Sa(a,c,e)}else Ca(a,c);if(a.showGuide){b=n(b,"div","map-toggles");a.showLessAndMoreLabels&&(c=u(b,"div","less-text",g.lessText),a.mapTogglesEnabled?c.onclick=function(){Da(a,!1)}:w(c,"no-click"));c=n(b,"div","days");d=da(a);
e=d.length;for(f=0;f<e;f++)Ta(a,c,d[f]);a.showLessAndMoreLabels&&(b=u(b,"div","more-text",g.moreText),a.mapTogglesEnabled?b.onclick=function(){Da(a,!0)}:w(b,"no-click"))}}function Sa(a,b,c){b=u(b,"button","type",c);a.currentView.type===c&&w(b,"active");b.onclick=function(){a.currentView.type!==c&&(a.currentView.type=c,r(a.onTypeSwitch,c),y(a))}}function Ta(a,b,c){b=n(b,"div");b.className="day";V(b,a,c.tooltipText);ha(a,c.id)&&(1===a.currentView.view&&A(c.mapCssClassName)?w(b,c.mapCssClassName):a.views.chart.enabled&&
2===a.currentView.view&&A(c.chartCssClassName)?w(b,c.chartCssClassName):a.views.statistics.enabled&&3===a.currentView.view&&A(c.statisticsCssClassName)?w(b,c.statisticsCssClassName):w(b,c.cssClassName));a.showNumbersInGuide&&(w(b,"day-number"),b.innerHTML=c.minimum+p.plus);a.mapTogglesEnabled?b.onclick=function(){for(var d=c.id,f=a.colorRanges.length,e=0;e<f;e++){var h=a.colorRanges[e];if(h.id===d){h.visible=!(M(h.visible)&&h.visible);r(a.onColorRangeTypeToggle,h.id,h.visible);y(a);break}}}:w(b,"no-hover")}
function Ca(a,b){if(A(a.descriptionText))if(A(a.descriptionTextLink)){var c=u(b,"a","label",a.descriptionText);c.href=a.descriptionTextLink;c.target="_blank"}else u(b,"span","label",a.descriptionText)}function ha(a,b){var c=!1;if("HOLIDAY"===b)c=!0;else for(var d=a.colorRanges.length,f=0;f<d;f++){var e=a.colorRanges[f];if(e.id===b&&(!M(e.visible)||e.visible)){c=!0;break}}return c}function Da(a,b){for(var c=a.colorRanges.length,d=0;d<c;d++)a.colorRanges[d].visible=b,r(a.onColorRangeTypeToggle,a.colorRanges[d].id,
b);y(a)}function oa(a,b,c,d){var f=null;q(d)&&za(a,d)&&(f={cssClassName:"holiday",id:"HOLIDAY",visible:!0});if(!q(f))for(a=b.length,d=0;d<a;d++){var e=b[d];if(c>=e.minimum)f=e;else break}return f}function Ra(a,b){for(var c=a.length,d=null,f=0;f<c;f++){var e=a[f];if(b.toString()===e.minimum.toString()){d=e;break}}return d}function da(a){return a.colorRanges.sort(function(b,c){return b.minimum-c.minimum})}function za(a,b){for(var c=a.holidays.length,d=!1,f=b.getDate(),e=b.getMonth()+1,h=b.getFullYear(),
l=0;l<c;l++){var m=a.holidays[l];if(A(m.date)&&m.showInViews&&(m=m.date.split("/"),2===m.length?d=f===parseInt(m[0])&&e===parseInt(m[1]):3===m.length&&(d=f===parseInt(m[0])&&e===parseInt(m[1])&&h===parseInt(m[2])),d))break}return d}function ma(a,b){b.allowFileImports&&(a.ondragover=Y,a.ondragenter=Y,a.ondragleave=Y,a.ondrop=function(c){Y(c);q(B.FileReader)&&0<c.dataTransfer.files.length&&Ea(c.dataTransfer.files,b)})}function Pa(a){var b=Ua("input");b.type="file";b.accept=".json, .txt";b.multiple=
"multiple";b.onchange=function(){Ea(b.files,a)};b.click()}function Ea(a,b){for(var c=a.length,d=[],f=Q(b),e=function(F,C){d.push(F);for(var z in C)C.hasOwnProperty(z)&&(f.hasOwnProperty(z)||(f[z]=0),f[z]+=C[z]);d.length===c&&(r(b.onImport,b.currentView.element),y(b))},h=0;h<c;h++){var l=a[h],m=l.name.split(".").pop().toLowerCase();"json"===m?Va(l,e):"txt"===m&&Wa(l,e)}}function Va(a,b){var c=new FileReader,d=null;c.readAsText(a);c.onloadend=function(){b(a.name,d)};c.onload=function(f){f=la(f.target.result);
f.parsed&&K(f.result)&&(d=f.result)}}function Wa(a,b){var c=new FileReader,d={};c.readAsText(a);c.onloadend=function(){b(a.name,d)};c.onload=function(f){f=f.target.result.toString().split(p.newLine);for(var e=f.length,h=0;h<e;h++){var l=f[h].split(":");d[l[0].trim()]=parseInt(l[1].trim())}}}function Aa(a){var b=null;var c=null;"csv"===a.exportType.toLowerCase()?c="text/csv":"json"===a.exportType.toLowerCase()?c="application/json":"xml"===a.exportType.toLowerCase()?c="application/xml":"txt"===a.exportType.toLowerCase()&&
(c="text/plain");if("csv"===a.exportType.toLowerCase()){var d=ia(a),f=[];for(e in d)d.hasOwnProperty(e)&&f.push([ja(e),ja(d[e])].join());0<f.length&&f.unshift([ja(g.dateText),ja(g.countText)].join());b=f.join(p.newLine)}else if("json"===a.exportType.toLowerCase())b=ba.stringify(ia(a));else if("xml"===a.exportType.toLowerCase()){var e=ia(a);f=[];f.push('<?xml version="1.0" ?>');f.push("<Dates>");for(d in e)e.hasOwnProperty(d)&&(f.push("<Date>"),f.push("<FullDate>"+d+"</FullDate>"),f.push("<Count>"+
e[d]+"</Count>"),f.push("</Date>"));f.push("</Dates>");b=f.join(p.newLine)}else if("txt"===a.exportType.toLowerCase()){e=ia(a);d=[];for(f in e)e.hasOwnProperty(f)&&d.push(f+": "+e[f].toString());b=d.join(p.newLine)}b!==p.empty&&(e=n(E.body,"a"),e.style.display="none",e.setAttribute("target","_blank"),e.setAttribute("href","data:"+c+";charset=utf-8,"+encodeURIComponent(b)),c=e.setAttribute,f=new Date,d=N(f.getDate())+p.dash+N(f.getMonth()+1)+p.dash+f.getFullYear(),f=N(f.getHours())+p.dash+N(f.getMinutes()),
b=p.empty,a.currentView.type!==g.unknownTrendText&&(b=a.currentView.type.toLowerCase().replace(p.space,p.underscore)+p.underscore),d=b+d+p.underscore+f+"."+a.exportType.toLowerCase(),c.call(e,"download",d),e.click(),E.body.removeChild(e),r(a.onExport,a.currentView.element))}function ia(a){var b={},c=Q(a);if(a.exportOnlyYearBeingViewed)for(var d=0;12>d;d++)for(var f=X(a.currentView.year,d),e=0;e<f;e++){var h=R(new Date(a.currentView.year,d,e+1));c.hasOwnProperty(h)&&(b[h]=c[h])}else{a=[];for(d in c)c.hasOwnProperty(d)&&
a.push(d);a.sort();d=a.length;for(f=0;f<d;f++)e=a[f],c.hasOwnProperty(e)&&(b[e]=c[e])}return b}function ja(a){a=a.toString().replace(/(\r\n|\n|\r)/gm,p.empty).replace(/(\s\s)/gm,p.space);a=a.replace(/"/g,'""');return'"'+a+'"'}function va(a){a=K(a)?a:{};a.views=K(a.views)?a.views:{};a.showGuide=v(a.showGuide,!0);a.showTitle=v(a.showTitle,!0);a.showYearSelector=v(a.showYearSelector,!0);a.showRefreshButton=v(a.showRefreshButton,!1);a.showExportButton=v(a.showExportButton,!1);a.mapTogglesEnabled=v(a.mapTogglesEnabled,
!0);a.exportOnlyYearBeingViewed=v(a.exportOnlyYearBeingViewed,!0);a.year=ka(a.year,(new Date).getFullYear());a.keepScrollPositions=v(a.keepScrollPositions,!1);a.extraSelectionYears=ka(a.extraSelectionYears,50);a.showYearSelectionDropDown=v(a.showYearSelectionDropDown,!0);a.view=t(a.view,"map");a.tooltipDelay=ka(a.tooltipDelay,750);a.exportType=t(a.exportType,"csv");a.descriptionText=t(a.descriptionText,null);a.descriptionTextLink=t(a.descriptionTextLink,null);a.useLocalStorageForData=v(a.useLocalStorageForData,
!1);a.allowFileImports=v(a.allowFileImports,!0);var b=a;var c=a.yearsToHide;var d=[];c=aa(c)?c:d;b.yearsToHide=c;a.showLessAndMoreLabels=v(a.showLessAndMoreLabels,!0);a.showNumbersInGuide=v(a.showNumbersInGuide,!1);a.showImportButton=v(a.showImportButton,!1);if(aa(a.colorRanges))for(b=a.colorRanges.length,c=0;c<b;c++)a.colorRanges[c].id=t(a.colorRanges[c].id,S()),a.colorRanges[c].minimum=ka(a.colorRanges[c].minimum,0),a.colorRanges[c].cssClassName=t(a.colorRanges[c].cssClassName,null),a.colorRanges[c].mapCssClassName=
t(a.colorRanges[c].mapCssClassName,null),a.colorRanges[c].chartCssClassName=t(a.colorRanges[c].chartCssClassName,null),a.colorRanges[c].statisticsCssClassName=t(a.colorRanges[c].statisticsCssClassName,null),a.colorRanges[c].tooltipText=t(a.colorRanges[c].tooltipText,null),a.colorRanges[c].visible=v(a.colorRanges[c].visible,!0);else a.colorRanges=[{id:S(),minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1",visible:!0},{id:S(),minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2",
visible:!0},{id:S(),minimum:20,cssClassName:"day-color-3",tooltipText:"Day Color 3",visible:!0},{id:S(),minimum:25,cssClassName:"day-color-4",tooltipText:"Day Color 4",visible:!0}];if(aa(a.holidays))for(b=a.holidays.length,c=0;c<b;c++)a.holidays[c].date=t(a.holidays[c].date,null),a.holidays[c].name=t(a.holidays[c].name,null),a.holidays[c].showInViews=v(a.holidays[c].showInViews,!0);else a.holidays=[];a.views.map=K(a.views.map)?a.views.map:{};a.views.map.showMonthDayGaps=v(a.views.map.showMonthDayGaps,
!0);a.views.map.showDayNames=v(a.views.map.showDayNames,!0);a.views.map.placeMonthNamesOnTheBottom=v(a.views.map.placeMonthNamesOnTheBottom,!1);a.views.map.showDayNumbers=v(a.views.map.showDayNumbers,!1);a.views.map.showMonthNames=v(a.views.map.showMonthNames,!0);a.views.map.showDaysInReverseOrder=v(a.views.map.showDaysInReverseOrder,!1);O(a.views.map.monthsToShow)&&(a.views.map.monthsToShow=qa);O(a.views.map.daysToShow)&&(a.views.map.daysToShow=ra);a.views.chart=K(a.views.chart)?a.views.chart:{};
a.views.chart.enabled=v(a.views.chart.enabled,!0);a.views.chart.showChartYLabels=v(a.views.chart.showChartYLabels,!0);a.views.chart.showMonthNames=v(a.views.chart.showMonthNames,!0);a.views.chart.showLineNumbers=v(a.views.chart.showLineNumbers,!1);O(a.views.chart.monthsToShow)&&(a.views.chart.monthsToShow=qa);O(a.views.chart.daysToShow)&&(a.views.chart.daysToShow=ra);a.views.statistics=K(a.views.statistics)?a.views.statistics:{};a.views.statistics.enabled=v(a.views.statistics.enabled,!0);a.views.statistics.showChartYLabels=
v(a.views.statistics.showChartYLabels,!0);a.views.statistics.showColorRangeLabels=v(a.views.statistics.showColorRangeLabels,!0);O(a.views.statistics.monthsToShow)&&(a.views.statistics.monthsToShow=qa);O(a.views.statistics.daysToShow)&&(a.views.statistics.daysToShow=ra);a.titleText=t(a.titleText,"Heat.js");a.dayToolTipText=t(a.dayToolTipText,"{d}{o} {mmmm} {yyyy}");a.onDayClick=D(a.onDayClick,null);a.onBackYear=D(a.onBackYear,null);a.onNextYear=D(a.onNextYear,null);a.onRefresh=D(a.onRefresh,null);
a.onBeforeRender=D(a.onBeforeRender,null);a.onRenderComplete=D(a.onRenderComplete,null);a.onDestroy=D(a.onDestroy,null);a.onExport=D(a.onExport,null);a.onSetYear=D(a.onSetYear,null);a.onTypeSwitch=D(a.onTypeSwitch,null);a.onDayToolTipRender=D(a.onDayToolTipRender,null);a.onAdd=D(a.onAdd,null);a.onRemove=D(a.onRemove,null);a.onReset=D(a.onReset,null);a.onViewSwitch=D(a.onViewSwitch,null);a.onColorRangeTypeToggle=D(a.onColorRangeTypeToggle,null);a.onImport=D(a.onImport,null);a.onStatisticClick=D(a.onStatisticClick,
null);return a}function X(a,b){return(new Date(a,b+1,0)).getDate()}function na(a){return 0>a.getDay()-1?6:a.getDay()-1}function Ba(a,b){var c=a,d=na(b);c=c.replace("{dddd}",g.dayNames[d]);c=c.replace("{dd}",N(b.getDate()));c=c.replace("{d}",b.getDate());d=c.replace;var f=b.getDate(),e=g.thText;if(31===f||21===f||1===f)e=g.stText;else if(22===f||2===f)e=g.ndText;else if(23===f||3===f)e=g.rdText;c=d.call(c,"{o}",e);c=c.replace("{mmmm}",g.monthNames[b.getMonth()]);c=c.replace("{mm}",N(b.getMonth()+1));
c=c.replace("{m}",b.getMonth()+1);c=c.replace("{yyyy}",b.getFullYear());c=c.replace("{yyy}",b.getFullYear().toString().substring(1));c=c.replace("{yy}",b.getFullYear().toString().substring(2));return c=c.replace("{y}",parseInt(b.getFullYear().toString().substring(2)).toString())}function q(a){return null!==a&&void 0!==a&&a!==p.empty}function K(a){return q(a)&&"object"===typeof a}function M(a){return q(a)&&"boolean"===typeof a}function A(a){return q(a)&&"string"===typeof a}function L(a){return q(a)&&
"function"===typeof a}function Z(a){return q(a)&&"number"===typeof a}function aa(a){return K(a)&&a instanceof Array}function Ua(a){a=a.toLowerCase();var b="text"===a;W.hasOwnProperty(a)||(W[a]=b?E.createTextNode(p.empty):E.createElement(a));return W[a].cloneNode(!1)}function n(a,b,c,d){b=b.toLowerCase();var f="text"===b;W.hasOwnProperty(b)||(W[b]=f?E.createTextNode(p.empty):E.createElement(b));b=W[b].cloneNode(!1);q(c)&&(b.className=c);q(d)?a.insertBefore(b,d):a.appendChild(b);return b}function u(a,
b,c,d,f){a=n(a,b,c,f);a.innerHTML=d;return a}function fa(a,b,c){var d=null;c=q(c)?c:!1;B.getComputedStyle?d=E.defaultView.getComputedStyle(a,null).getPropertyValue(b):a.currentStyle&&(d=a.currentStyle[b]);c&&(d=parseFloat(d,10));return d}function w(a,b){a.className+=p.space+b}function Y(a){a.preventDefault();a.cancelBubble=!0}function ya(a){for(var b=a.children,c=b.length-1;c--;)a.appendChild(b[c])}function r(a){var b=null;L(a)&&(b=a.apply(null,[].slice.call(arguments,1)));return b}function t(a,b){return A(a)?
a:b}function v(a,b){return M(a)?a:b}function D(a,b){return L(a)?a:b}function ka(a,b){return Z(a)?a:b}function la(a){var b=!0,c=null;try{A(a)&&(c=ba.parse(a))}catch(d){try{c=eval("("+a+")"),L(c)&&(c=c())}catch(f){g.safeMode||(console.error("Errors in object: "+d.message+", "+f.message),b=!1),c=null}}return{parsed:b,result:c}}function S(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push(p.dash);var c=J.floor(16*J.random()).toString(16);a.push(c)}return a.join(p.empty)}function N(a){a=
a.toString();return 1===a.length?"0"+a:a}function xa(a,b){return a.substring(0,b.length).toLowerCase()===b.toLowerCase()}function R(a){return a.getFullYear()+p.dash+N(a.getMonth()+1)+p.dash+N(a.getDate())}function Fa(a){g=K(a)?a:{};g.safeMode=v(g.safeMode,!0);a=g;var b=g.domElementTypes,c=["*"];A(b)?(b=b.split(p.space),0===b.length&&(b=c)):b=aa(b)?b:c;a.domElementTypes=b;g.stText=t(g.stText,"st");g.ndText=t(g.ndText,"nd");g.rdText=t(g.rdText,"rd");g.thText=t(g.thText,"th");g.backButtonText=t(g.backButtonText,
"Back");g.nextButtonText=t(g.nextButtonText,"Next");g.refreshButtonText=t(g.refreshButtonText,"Refresh");g.exportButtonText=t(g.exportButtonText,"Export");g.lessText=t(g.lessText,"Less");g.moreText=t(g.moreText,"More");g.dateText=t(g.dateText,"Date");g.countText=t(g.countText,"Count");g.mapText=t(g.mapText,"Map");g.chartText=t(g.chartText,"Chart");g.noChartDataMessage=t(g.noChartDataMessage,"There is currently no data to view.");g.statisticsText=t(g.statisticsText,"Statistics");g.noStatisticsDataMessage=
t(g.noStatisticsDataMessage,"There are currently no statistics to view.");g.unknownTrendText=t(g.unknownTrendText,"Unknown");g.importButtonText=t(g.importButtonText,"Import");O(g.monthNames,12)&&(g.monthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));O(g.dayNames,7)&&(g.dayNames="Mon Tue Wed Thu Fri Sat Sun".split(" "))}function O(a,b){b=Z(b)?b:1;return!aa(a)||a.length<b}var E=null,B=null,J=null,ba=null,g={},p={empty:"",space:" ",newLine:"\n",dash:"-",underscore:"_",plus:"+"},
G={notFound:-1},qa=[1,2,3,4,5,6,7,8,9,10,11,12],ra=[1,2,3,4,5,6,7],W={},T=null,k={};this.addDates=function(a,b,c,d){if(k.hasOwnProperty(a)){d=M(d)?d:!0;c=A(c)?c:g.unknownTrendText;for(var f=b.length,e=0;e<f;e++)this.addDate(a,b[e],c,!1);d&&y(k[a].options,!0)}return this};this.addDate=function(a,b,c,d){k.hasOwnProperty(a)&&(d=M(d)?d:!0,c=A(c)?c:g.unknownTrendText,b=R(b),k[a].type.hasOwnProperty(c)||(k[a].type[c]={},k[a].types++),k[a].type[c].hasOwnProperty(b)||(k[a].type[c][b]=0),k[a].type[c][b]++,
a=k[a].options,r(a.onAdd,a.currentView.element),d&&y(a,!0));return this};this.removeDates=function(a,b,c,d){if(k.hasOwnProperty(a)){c=A(c)?c:g.unknownTrendText;d=M(d)?d:!0;for(var f=b.length,e=0;e<f;e++)this.removeDate(a,b[e],c,!1);d&&y(k[a].options,!0)}return this};this.removeDate=function(a,b,c,d){k.hasOwnProperty(a)&&(c=A(c)?c:g.unknownTrendText,b=R(b),k[a].type.hasOwnProperty(c)&&k[a].type[c].hasOwnProperty(b)&&(d=M(d)?d:!0,0<k[a].type[c][b]&&k[a].type[c][b]--,a=k[a].options,r(a.onRemove,a.currentView.element),
d&&y(a,!0)));return this};this.resetAll=function(a){for(var b in k)k.hasOwnProperty(b)&&this.reset(b,a);return this};this.reset=function(a,b){if(k.hasOwnProperty(a)){b=M(b)?b:!0;var c=k[a].options;c.currentView.type=g.unknownTrendText;wa(a,c,!1);r(c.onReset,c.currentView.element);b&&y(c,!0)}return this};this["export"]=function(a){k.hasOwnProperty(a)&&Aa(k[a].options);return this};this.refresh=function(a){k.hasOwnProperty(a)&&(a=k[a].options,y(a,!0),r(a.onRefresh,a.currentView.element));return this};
this.refreshAll=function(){for(var a in k)if(k.hasOwnProperty(a)){var b=k[a].options;y(b,!0);r(b.onRefresh,b.currentView.element)}return this};this.setYear=function(a,b){if(k.hasOwnProperty(a)){var c=k[a].options;c.yearsToHide.indexOf(b)===G.notFound&&(c.currentView.year=b,y(c),r(c.onSetYear,c.currentView.year))}return this};this.setYearToHighest=function(a){if(k.hasOwnProperty(a)){a=k[a].options;var b=Q(a),c=0,d;for(d in b)b.hasOwnProperty(d)&&(c=J.max(c,parseInt(d.split(p.dash)[0])));0<c&&a.yearsToHide.indexOf(c)===
G.notFound&&(a.currentView.year=c,y(a),r(a.onSetYear,a.currentView.year))}return this};this.setYearToLowest=function(a){if(k.hasOwnProperty(a)){a=k[a].options;var b=Q(a),c=9999,d;for(d in b)b.hasOwnProperty(d)&&(c=J.min(c,parseInt(d.split(p.dash)[0])));9999>c&&a.yearsToHide.indexOf(c)===G.notFound&&(a.currentView.year=c,y(a),r(a.onSetYear,a.currentView.year))}return this};this.moveToPreviousYear=function(a){if(k.hasOwnProperty(a)){a=k[a].options;for(a.currentView.year--;a.yearsToHide.indexOf(a.currentView.year)>
G.notFound;)a.currentView.year--;y(a);r(a.onBackYear,a.currentView.year)}return this};this.moveToNextYear=function(a){if(k.hasOwnProperty(a)){a=k[a].options;for(a.currentView.year++;a.yearsToHide.indexOf(a.currentView.year)>G.notFound;)a.currentView.year++;y(a);r(a.onNextYear,a.currentView.year)}return this};this.moveToCurrentYear=function(a){k.hasOwnProperty(a)&&(a=k[a].options,a.currentView.year=(new Date).getFullYear(),y(a),r(a.onSetYear,a.currentView.year));return this};this.getYear=function(a){var b=
null;k.hasOwnProperty(a)&&(b=k[a].options.currentView.year);return b};this.render=function(a,b){ta(ua(b,a));return this};this.renderAll=function(){sa();return this};this.switchView=function(a,b){if(k.hasOwnProperty(a)){var c=k[a].options,d=null;"map"===b.toLowerCase()?d=1:"chart"===b.toLowerCase()?d=2:"statistics"===b.toLowerCase()&&(d=3);Z(d)&&(c.currentView.view=d,r(c.onViewSwitch,b),y(c,!1,!0))}return this};this.switchType=function(a,b){if(k.hasOwnProperty(a)&&k[a].type.hasOwnProperty(b)){var c=
k[a].options;c.currentView.type!==b&&(c.currentView.type=b,r(c.onTypeSwitch,b),y(c))}return this};this.updateOptions=function(a,b){if(k.hasOwnProperty(a)&&K(b)){var c=k[a].options,d=va(b),f=!1,e;for(e in d)d.hasOwnProperty(e)&&c.hasOwnProperty(e)&&c[e]!==d[e]&&(c[e]=d[e],f=!0);f&&(y(c,!0),r(c.onRefresh,c.currentView.element))}return this};this.destroyAll=function(){for(var a in k)if(k.hasOwnProperty(a)){var b=k[a].options;b.currentView.element.innerHTML=p.empty;b.currentView.element.className=p.empty;
E.body.removeChild(b.currentView.tooltip);r(b.onDestroy,b.currentView.element)}k={};return this};this.destroy=function(a){if(k.hasOwnProperty(a)){var b=k[a].options;b.currentView.element.innerHTML=p.empty;b.currentView.element.className=p.empty;E.body.removeChild(b.currentView.tooltip);r(b.onDestroy,b.currentView.element);delete k[a]}return this};this.setConfiguration=function(a,b){var c=!1,d;for(d in a)a.hasOwnProperty(d)&&g.hasOwnProperty(d)&&g[d]!==a[d]&&(g[d]=a[d],c=!0);c&&(b=q(b)?b:!0,Fa(g),
b&&this.refreshAll());return this};this.getIds=function(){var a=[],b;for(b in k)k.hasOwnProperty(b)&&a.push(b);return a};this.getVersion=function(){return"2.4.0"};(function(a,b,c,d){E=a;B=b;J=c;ba=d;Fa();E.addEventListener("DOMContentLoaded",function(){sa()});q(B.$heat)||(B.$heat=this)})(document,window,Math,JSON)})();
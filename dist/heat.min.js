/*! Heat.js v2.6.0 | (c) Bunoon 2024 | MIT License */
(function(){function ua(){for(var a=g.domElementTypes,b=a.length,c=0;c<b;c++){var d=E.getElementsByTagName(a[c]);d=[].slice.call(d);for(var e=d.length,f=0;f<e;f++){var h=d[f],m=!0;if(q(h)&&h.hasAttribute("data-heat-options")){var l=h.getAttribute("data-heat-options");n(l)?(l=ma(l),l.parsed&&G(l.result)?va(wa(l.result,h)):g.safeMode||(console.error("The attribute 'data-heat-options' is not a valid object."),m=!1)):g.safeMode||(console.error("The attribute 'data-heat-options' has not been set correctly."),
m=!1)}if(!m)break}}}function wa(a,b){var c=xa(a),d=n(c.view)?c.view.toLowerCase():r.empty;c.currentView={};c.currentView.element=b;c.currentView.tooltip=null;c.currentView.tooltipTimer=null;c.currentView.mapContents=null;c.currentView.mapContentsScrollLeft=0;c.currentView.year=c.year;c.currentView.type=g.unknownTrendText;c.currentView.isInFetchMode=M(c.onDataFetch);c.currentView.isInFetchModeTimer=null;c.views.chart.enabled&&(c.currentView.chartContents=null,c.currentView.chartContentsScrollLeft=
0);c.views.statistics.enabled&&(c.currentView.statisticsContents=null,c.currentView.statisticsContentsScrollLeft=0);c.currentView.view="map"===d?1:"chart"===d?2:"statistics"===d?3:1;return c}function va(a){t(a.onBeforeRender,a.currentView.element);n(a.currentView.element.id)||(a.currentView.element.id=U());a.currentView.element.className="heat-js";a.currentView.element.removeAttribute("data-heat-options");na(a.currentView.element.id,a);y(a);t(a.onRenderComplete,a.currentView.element)}function y(a,
b,c){b=q(b)?b:!1;c=q(c)?c:!1;if(b&&a.useLocalStorageForData&&A.localStorage){b=a.currentView.element.id;if(a.useLocalStorageForData&&A.localStorage){for(var d=A.localStorage.length,e=[],f=a.currentView.element.id,h=0;h<d;h++)ya(A.localStorage.key(h),"HJS_"+f)&&e.push(A.localStorage.key(h));d=e.length;for(f=0;f<d;f++)A.localStorage.removeItem(e[f])}e=ca.stringify(k[b].type);A.localStorage.setItem("HJS_"+b,e)}q(a.currentView.mapContents)&&(a.currentView.mapContentsScrollLeft=a.currentView.mapContents.scrollLeft);
a.views.chart.enabled&&q(a.currentView.chartContents)&&(a.currentView.chartContentsScrollLeft=a.currentView.chartContents.scrollLeft);a.views.statistics.enabled&&q(a.currentView.statisticsContents)&&(a.currentView.statisticsContentsScrollLeft=a.currentView.statisticsContents.scrollLeft);a.currentView.element.innerHTML=r.empty;da(a);Ja(a);Ka(a);La(a);e=c;a.currentView.mapContents=p(a.currentView.element,"div","map-contents");a.views.chart.enabled&&(a.currentView.chartContents=p(a.currentView.element,
"div","chart-contents"),oa(a.currentView.chartContents,a));a.views.statistics.enabled&&(a.currentView.statisticsContents=p(a.currentView.element,"div","statistics-contents"),oa(a.currentView.statisticsContents,a));Ma(a);if(b=a.views.map.showNoDataMessageWhenDataIsNotAvailable){b=!1;d=O(a);f=a.currentView.year.toString();for(var m in d)if(d.hasOwnProperty(m)&&m.split(r.dash)[0]===f){b=!0;break}b=!b}if(b)m=u(a.currentView.mapContents,"div","no-data-message",g.noMapDataMessage),e&&x(m,"view-switch");
else{a.currentView.mapContents.style.minHeight="unset";oa(a.currentView.mapContents,a);d=p(a.currentView.mapContents,"div","map");m=a.currentView.year;b=!1;e&&x(d,"view-switch");if(a.views.map.showDayNames){e=p(d,"div","days");if(!a.views.map.showMonthNames||a.views.map.placeMonthNamesOnTheBottom)e.className="days-months-bottom";for(f=0;7>f;f++)a.views.map.daysToShow.indexOf(f+1)>H.notFound&&u(e,"div","day-name",g.dayNames[f]);a.views.map.showDaysInReverseOrder&&za(e)}e=p(d,"div","months");d=ea(a);
for(f=0;12>f;f++)if(fa(a.views.map.monthsToShow,f)){h=p(e,"div","month");var l=p(h,"div","day-columns"),F=Z(m,f),D=p(l,"div","day-column"),B=!1;var z=pa(new Date(m,f,1));var I=1;F+=z;for(var J=0;J<F;J++){J>=z?B=!0:a.views.map.daysToShow.indexOf(I)>H.notFound&&p(D,"div","day-disabled");if(B){var R=null;a.views.map.daysToShow.indexOf(I)>H.notFound&&(R=Na(a,D,J-z,f,m,d));if(0===(J+1)%7&&(a.views.map.showDaysInReverseOrder&&za(D),D=p(l,"div","day-column"),I=0,!q(V)&&q(R))){var Oa=ha(R,"margin-left",!0),
Pa=ha(R,"margin-right",!0);V=R.offsetWidth+Oa+Pa}}I++}a.views.map.showMonthNames&&(F=h.offsetWidth,l=a.views.map.placeMonthNamesOnTheBottom?u(h,"div","month-name-bottom",g.monthNames[f]):u(h,"div","month-name",g.monthNames[f],l),q(l)&&(l.style.width=a.views.map.showMonthDayGaps?F+"px":F-V+"px"));b&&q(V)&&(0<z&&!a.views.map.showMonthDayGaps?h.style.marginLeft=-V+"px":0===z&&a.views.map.showMonthDayGaps&&(h.style.marginLeft=V+"px"));b=!0}a.keepScrollPositions&&(a.currentView.mapContents.scrollLeft=
a.currentView.mapContentsScrollLeft)}if(a.views.chart.enabled){d=c;h=p(a.currentView.chartContents,"div","chart");z=p(h,"div","y-labels");m=p(h,"div","day-lines");b=ea(a);e=0;f=O(a);for(l=0;12>l;l++)for(F=Z(a.currentView.year,l),D=0;D<F;D++)B=N(new Date(a.currentView.year,l,D+1)),f.hasOwnProperty(B)&&(e=K.max(e,parseInt(f[B])));l=e;f=a.currentView.year;e=0;d&&x(h,"view-switch");0<l&&a.views.chart.showChartYLabels?(e=u(z,"div","label-0",l.toString()),u(z,"div","label-25",(3*K.floor(l/4)).toString()),
u(z,"div","label-50",K.floor(l/2).toString()),u(z,"div","label-75",K.floor(l/4).toString()),u(z,"div","label-100","0"),z.style.width=e.offsetWidth+"px",e=z.offsetWidth+ha(z,"margin-right",!0)):z.parentNode.removeChild(z);if(0===l)a.currentView.chartContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px",h.parentNode.removeChild(h),m=u(a.currentView.chartContents,"div","no-data-message",g.noChartDataMessage),d&&x(m,"view-switch");else{h=a.currentView.mapContents.offsetHeight/l;for(l=z=
d=0;12>l;l++)if(fa(a.views.chart.monthsToShow,l))for(F=Z(f,l),D=1,d++,B=0;B<F;B++)a.views.chart.daysToShow.indexOf(D)>H.notFound&&Qa(m,a,B+1,l,f,b,h),0===(B+1)%7&&(D=0),D++,z++;if(a.views.chart.showMonthNames){b=p(a.currentView.chartContents,"div","chart-months");d=m.offsetWidth/d;for(h=f=0;12>h;h++)fa(a.views.chart.monthsToShow,h)&&(u(b,"div","month-name",g.monthNames[h]).style.left=e+d*f+"px",f++);b.style.width=m.offsetWidth+"px";m=p(b,"div","month-name-space");m.style.height=b.offsetHeight+"px";
m.style.width=e+"px"}a.keepScrollPositions&&(a.currentView.chartContents.scrollLeft=a.currentView.chartContentsScrollLeft)}a.currentView.chartContents.style.display="none"}if(a.views.statistics.enabled){d=c;f=p(a.currentView.statisticsContents,"div","statistics");c=p(a.currentView.statisticsContents,"div","statistics-ranges");h=p(f,"div","y-labels");m=p(f,"div","range-lines");b=ea(a);e={};z=0;l=O(a);for(F=e["0"]=0;12>F;F++)for(D=Z(a.currentView.year,F),B=0;B<D;B++)I=N(new Date(a.currentView.year,
F,B+1)),l.hasOwnProperty(I)&&(J=I.split(r.dash),J=new Date(J[2],J[1],J[0]),R=pa(J),!Aa(a,J)&&fa(a.views.statistics.monthsToShow,J.getMonth())&&a.views.statistics.daysToShow.indexOf(R)>H.notFound&&(I=qa(a,b,l[I]),q(I)?(e.hasOwnProperty(I.minimum.toString())||(e[I.minimum.toString()]=0),e[I.minimum]++,z=K.max(z,e[I.minimum])):e["0"]++));d&&x(f,"view-switch");0<z&&a.views.statistics.showChartYLabels?(l=u(h,"div","label-0",z.toString()),u(h,"div","label-25",(3*K.floor(z/4)).toString()),u(h,"div","label-50",
K.floor(z/2).toString()),u(h,"div","label-75",K.floor(z/4).toString()),u(h,"div","label-100","0"),h.style.width=l.offsetWidth+"px",c.style.paddingLeft=h.offsetWidth+ha(h,"margin-right",!0)+"px"):h.parentNode.removeChild(h);if(0===z){a.currentView.statisticsContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px";f.parentNode.removeChild(f);c.parentNode.removeChild(c);var S=u(a.currentView.statisticsContents,"div","no-statistics-message",g.noStatisticsDataMessage);d&&x(S,"view-switch")}else{d=
a.currentView.mapContents.offsetHeight/z;a.views.statistics.showColorRangeLabels||c.parentNode.removeChild(c);for(S in e)e.hasOwnProperty(S)&&(Ra(S,m,e[S],a,b,d),f=Ba(b,S),a.views.statistics.showColorRangeLabels&&(a.views.statistics.useColorRangeNamesForLabels&&q(f)&&n(f.name)?u(c,"div","range-name",f.name):u(c,"div","range-name",S+r.plus)));a.keepScrollPositions&&(a.currentView.statisticsContents.scrollLeft=a.currentView.statisticsContentsScrollLeft)}a.currentView.statisticsContents.style.display=
"none"}a.currentView.mapContents.style.display="none";1===a.currentView.view?a.currentView.mapContents.style.display="block":a.views.chart.enabled&&2===a.currentView.view?a.currentView.chartContents.style.display="block":a.views.statistics.enabled&&3===a.currentView.view?a.currentView.statisticsContents.style.display="block":a.currentView.chartContents.style.display="block"}function na(a,b,c){c=q(c)?c:!0;k[a]={options:b,type:{},types:1};k[a].type[g.unknownTrendText]={};if(c&&!b.currentView.isInFetchMode&&
b.useLocalStorageForData&&A.localStorage)for(a=A.localStorage.length,b=b.currentView.element.id,c=0;c<a;c++){var d=A.localStorage.key(c);if(ya(d,"HJS_")&&(d=A.localStorage.getItem(d),d=ma(d),d.parsed)){k[b].type=d.result;k[b].types=0;for(var e in k[b].type)k[b].type.hasOwnProperty(e)&&k[b].types++}}}function O(a){return k[a.currentView.element.id].type[a.currentView.type]}function fa(a,b){return a.indexOf(b+1)>H.notFound}function Ka(a){q(a.currentView.tooltip)||(a.currentView.tooltip=p(E.body,"div",
"heat-js-tooltip"),a.currentView.tooltip.style.display="none",E.body.addEventListener("mousemove",function(){da(a)}),E.addEventListener("scroll",function(){da(a)}))}function W(a,b,c){null!==a&&(a.onmousemove=function(d){Sa(d,b,c)})}function Sa(a,b,c){aa(a);da(b);b.currentView.tooltipTimer=setTimeout(function(){b.currentView.tooltip.innerHTML=c;b.currentView.tooltip.style.display="block";var d=b.currentView.tooltip,e=a.pageX,f=a.pageY;var h=E.documentElement;var m=(A.pageXOffset||h.scrollLeft)-(h.clientLeft||
0);h=(A.pageYOffset||h.scrollTop)-(h.clientTop||0);d.style.display="block";e+d.offsetWidth>A.innerWidth?e-=d.offsetWidth:e++;f+d.offsetHeight>A.innerHeight?f-=d.offsetHeight:f++;e<m&&(e=a.pageX+1);f<h&&(f=a.pageY+1);d.style.left=e+"px";d.style.top=f+"px"},b.tooltipDelay)}function da(a){q(a.currentView.tooltip)&&(q(a.currentView.tooltipTimer)&&(clearTimeout(a.currentView.tooltipTimer),a.currentView.tooltipTimer=null),"block"===a.currentView.tooltip.style.display&&(a.currentView.tooltip.style.display=
"none"))}function La(a){if(a.showTitle||a.showYearSelector||a.showRefreshButton||a.showExportButton||a.showImportButton){var b=p(a.currentView.element,"div","title-bar"),c=p(b,"div","title");a.views.chart.enabled||a.views.statistics.enabled?p(c,"div","down-arrow"):x(c,"no-click");a.showTitle&&(c.innerHTML+=a.titleText);if(a.views.chart.enabled||a.views.statistics.enabled){c=p(c,"div","titles-list");c=p(c,"div","titles");var d=u(c,"div","title",g.mapText);ra(a,d,1,"map");a.views.chart.enabled&&(d=
u(c,"div","title",g.chartText),ra(a,d,2,"chart"));a.views.statistics.enabled&&(c=u(c,"div","title",g.statisticsText),ra(a,c,3,"statistics"))}a.showImportButton&&!a.currentView.isInFetchMode&&(u(b,"button","import",g.importButtonText).onclick=function(){Ta(a)});a.showExportButton&&(u(b,"button","export",g.exportButtonText).onclick=function(){Ca(a)});a.showRefreshButton&&(u(b,"button","refresh",g.refreshButtonText).onclick=function(){y(a);t(a.onRefresh,a.currentView.element)});if(a.showYearSelector){u(b,
"button","back",g.backButtonText).onclick=function(){for(a.currentView.year--;a.yearsToHide.indexOf(a.currentView.year)>H.notFound;)a.currentView.year--;y(a);t(a.onBackYear,a.currentView.year)};a.currentView.yearText=u(b,"div","year-text",a.currentView.year);if(a.showYearSelectionDropDown){p(a.currentView.yearText,"div","down-arrow");c=p(a.currentView.yearText,"div","years-list");d=p(c,"div","years");var e=(new Date).getFullYear(),f=null;c.style.display="block";c.style.visibility="hidden";for(var h=
e-a.extraSelectionYears;h<e+a.extraSelectionYears;h++)if(a.yearsToHide.indexOf(h)===H.notFound){var m=Ua(a,d,h);q(f)||(f=m)}q(f)&&(d.scrollTop=f.offsetTop-d.offsetHeight/2);c.style.display="none";c.style.visibility="visible"}else x(a.currentView.yearText,"no-click");u(b,"button","next",g.nextButtonText).onclick=function(){for(a.currentView.year++;a.yearsToHide.indexOf(a.currentView.year)>H.notFound;)a.currentView.year++;y(a);t(a.onNextYear,a.currentView.year)}}}}function ra(a,b,c,d){a.currentView.view===
c?x(b,"title-active"):b.onclick=function(){a.currentView.view=c;t(a.onViewSwitch,d);y(a,!1,!0)}}function Ua(a,b,c){var d=null;b=u(b,"div","year",c);a.currentView.year!==c?b.onclick=function(){a.currentView.year=c;y(a);t(a.onSetYear,a.currentView.year)}:(x(b,"year-active"),d=b);return d}function Na(a,b,c,d,e,f){c+=1;b=p(b,"div","day");var h=new Date(e,d,c),m=k[a.currentView.element.id].type[a.currentView.type][N(h)];m=X(m)?m:0;M(a.onDayToolTipRender)?W(b,a,t(a.onDayToolTipRender,h,m)):W(b,a,Da(a.dayToolTipText,
h));a.views.map.showDayNumbers&&0<m&&(b.innerHTML=m.toString());M(a.onDayClick)?b.onclick=function(){t(a.onDayClick,h,m)}:x(b,"no-hover");d=qa(a,f,m,h);q(d)&&ia(a,d.id)&&(n(d.mapCssClassName)?x(b,d.mapCssClassName):x(b,d.cssClassName));return b}function Qa(a,b,c,d,e,f,h){var m=new Date(e,d,c);a=p(a,"div","day-line");var l=O(b)[N(m)];l=X(l)?l:0;M(b.onDayToolTipRender)?W(a,b,t(b.onDayToolTipRender,m,l)):W(a,b,Da(b.dayToolTipText,m));b.views.chart.showLineNumbers&&0<l&&(x(a,"day-line-number"),a.innerHTML=
l.toString());h*=l;a.style.height=h+"px";0>=h&&(a.style.visibility="hidden");M(b.onDayClick)?a.onclick=function(){t(b.onDayClick,m,l)}:x(a,"no-hover");f=qa(b,f,l,m);q(f)&&ia(b,f.id)&&(n(f.chartCssClassName)?x(a,f.chartCssClassName):x(a,f.cssClassName))}function Ra(a,b,c,d,e,f){b=p(b,"div","range-line");var h=Ba(e,a);a=c*f;b.style.height=a+"px";0>=a&&(b.style.visibility="hidden");W(b,d,c.toString());d.views.statistics.showRangeNumbers&&0<c&&(x(b,"range-line-number"),u(b,"div","count",c));M(d.onStatisticClick)?
b.onclick=function(){t(d.onStatisticClick,h)}:x(b,"no-hover");q(h)&&ia(d,h.id)&&(n(h.statisticsCssClassName)?x(b,h.statisticsCssClassName):x(b,h.cssClassName))}function Ma(a){var b=p(a.currentView.element,"div","guide"),c=p(b,"div","map-types"),d=0;for(e in k[a.currentView.element.id].type[g.unknownTrendText])if(k[a.currentView.element.id].type[g.unknownTrendText].hasOwnProperty(e)){d++;break}if(1<k[a.currentView.element.id].types){if(n(a.descriptionText)){var e=p(a.currentView.element,"div","description",
b);Ea(a,e)}for(var f in k[a.currentView.element.id].type)if(f!==g.unknownTrendText||0<d)0===d&&a.currentView.type===g.unknownTrendText&&(a.currentView.type=f),Va(a,c,f)}else Ea(a,c);if(a.showGuide){b=p(b,"div","map-toggles");a.showLessAndMoreLabels&&(c=u(b,"div","less-text",g.lessText),a.colorRangeTogglesEnabled?c.onclick=function(){Fa(a,!1)}:x(c,"no-click"));c=p(b,"div","days");d=ea(a);f=d.length;for(e=0;e<f;e++)Wa(a,c,d[e]);a.showLessAndMoreLabels&&(b=u(b,"div","more-text",g.moreText),a.colorRangeTogglesEnabled?
b.onclick=function(){Fa(a,!0)}:x(b,"no-click"))}}function Va(a,b,c){b=u(b,"button","type",c);a.currentView.type===c&&x(b,"active");b.onclick=function(){a.currentView.type!==c&&(a.currentView.type=c,t(a.onTypeSwitch,c),y(a))}}function Wa(a,b,c){b=p(b,"div");b.className="day";W(b,a,c.tooltipText);ia(a,c.id)&&(1===a.currentView.view&&n(c.mapCssClassName)?x(b,c.mapCssClassName):a.views.chart.enabled&&2===a.currentView.view&&n(c.chartCssClassName)?x(b,c.chartCssClassName):a.views.statistics.enabled&&3===
a.currentView.view&&n(c.statisticsCssClassName)?x(b,c.statisticsCssClassName):x(b,c.cssClassName));a.showNumbersInGuide&&(x(b,"day-number"),b.innerHTML=c.minimum+r.plus);a.colorRangeTogglesEnabled?b.onclick=function(){for(var d=c.id,e=a.colorRanges.length,f=0;f<e;f++){var h=a.colorRanges[f];if(h.id===d){h.visible=!(L(h.visible)&&h.visible);t(a.onColorRangeTypeToggle,h.id,h.visible);y(a);break}}}:x(b,"no-hover")}function Ea(a,b){if(n(a.descriptionText))if(n(a.descriptionTextLink)){var c=u(b,"a","label",
a.descriptionText);c.href=a.descriptionTextLink;c.target="_blank"}else u(b,"span","label",a.descriptionText)}function Ja(a){a.currentView.isInFetchMode&&(q(a.currentView.isInFetchModeTimer)||Ga(a),q(a.currentView.isInFetchModeTimer)||(a.currentView.isInFetchModeTimer=setInterval(function(){Ga(a);y(a)},a.dataFetchDelay)))}function Ga(a){var b=a.currentView.element.id,c=t(a.onDataFetch,b);if(G(c)){na(b,a,!1);for(var d in c)c.hasOwnProperty(d)&&(k[b].type[g.unknownTrendText].hasOwnProperty(d)||(k[b].type[g.unknownTrendText][d]=
0),k[b].type[g.unknownTrendText][d]+=c[d])}}function ia(a,b){var c=!1;if("HOLIDAY"===b)c=!0;else for(var d=a.colorRanges.length,e=0;e<d;e++){var f=a.colorRanges[e];if(f.id===b&&(!L(f.visible)||f.visible)){c=!0;break}}return c}function Fa(a,b){for(var c=a.colorRanges.length,d=0;d<c;d++)a.colorRanges[d].visible=b,t(a.onColorRangeTypeToggle,a.colorRanges[d].id,b);y(a)}function qa(a,b,c,d){var e=null;q(d)&&Aa(a,d)&&(e={cssClassName:"holiday",id:"HOLIDAY",visible:!0});if(!q(e))for(a=b.length,d=0;d<a;d++){var f=
b[d];if(c>=f.minimum)e=f;else break}return e}function Ba(a,b){for(var c=a.length,d=null,e=0;e<c;e++){var f=a[e];if(b.toString()===f.minimum.toString()){d=f;break}}return d}function ea(a){return a.colorRanges.sort(function(b,c){return b.minimum-c.minimum})}function Aa(a,b){for(var c=a.holidays.length,d=!1,e=b.getDate(),f=b.getMonth()+1,h=b.getFullYear(),m=0;m<c;m++){var l=a.holidays[m];if(n(l.date)&&l.showInViews&&(l=l.date.split("/"),2===l.length?d=e===parseInt(l[0])&&f===parseInt(l[1]):3===l.length&&
(d=e===parseInt(l[0])&&f===parseInt(l[1])&&h===parseInt(l[2])),d))break}return d}function oa(a,b){b.allowFileImports&&!b.currentView.isInFetchMode&&(a.ondragover=aa,a.ondragenter=aa,a.ondragleave=aa,a.ondrop=function(c){aa(c);q(A.FileReader)&&0<c.dataTransfer.files.length&&Ha(c.dataTransfer.files,b)})}function Ta(a){var b=Xa("input");b.type="file";b.accept=".json, .txt";b.multiple="multiple";b.onchange=function(){Ha(b.files,a)};b.click()}function Ha(a,b){for(var c=a.length,d=[],e=O(b),f=function(F,
D){d.push(F);for(var B in D)D.hasOwnProperty(B)&&(e.hasOwnProperty(B)||(e[B]=0),e[B]+=D[B]);d.length===c&&(t(b.onImport,b.currentView.element),y(b))},h=0;h<c;h++){var m=a[h],l=m.name.split(".").pop().toLowerCase();"json"===l?Ya(m,f):"txt"===l&&Za(m,f)}}function Ya(a,b){var c=new FileReader,d=null;c.readAsText(a);c.onloadend=function(){b(a.name,d)};c.onload=function(e){e=ma(e.target.result);e.parsed&&G(e.result)&&(d=e.result)}}function Za(a,b){var c=new FileReader,d={};c.readAsText(a);c.onloadend=
function(){b(a.name,d)};c.onload=function(e){e=e.target.result.toString().split(r.newLine);for(var f=e.length,h=0;h<f;h++){var m=e[h].split(":");d[m[0].trim()]=parseInt(m[1].trim())}}}function Ca(a){var b=null;var c=null;"csv"===a.exportType.toLowerCase()?c="text/csv":"json"===a.exportType.toLowerCase()?c="application/json":"xml"===a.exportType.toLowerCase()?c="application/xml":"txt"===a.exportType.toLowerCase()&&(c="text/plain");if("csv"===a.exportType.toLowerCase()){var d=ja(a),e=[];for(f in d)d.hasOwnProperty(f)&&
e.push([ka(f),ka(d[f])].join());0<e.length&&e.unshift([ka(g.dateText),ka(g.countText)].join());b=e.join(r.newLine)}else if("json"===a.exportType.toLowerCase())b=ca.stringify(ja(a));else if("xml"===a.exportType.toLowerCase()){var f=ja(a);e=[];e.push('<?xml version="1.0" ?>');e.push("<Dates>");for(d in f)f.hasOwnProperty(d)&&(e.push("<Date>"),e.push("<FullDate>"+d+"</FullDate>"),e.push("<Count>"+f[d]+"</Count>"),e.push("</Date>"));e.push("</Dates>");b=e.join(r.newLine)}else if("txt"===a.exportType.toLowerCase()){f=
ja(a);d=[];for(e in f)f.hasOwnProperty(e)&&d.push(e+": "+f[e].toString());b=d.join(r.newLine)}b!==r.empty&&(f=p(E.body,"a"),f.style.display="none",f.setAttribute("target","_blank"),f.setAttribute("href","data:"+c+";charset=utf-8,"+encodeURIComponent(b)),c=f.setAttribute,e=new Date,d=P(e.getDate())+r.dash+P(e.getMonth()+1)+r.dash+e.getFullYear(),e=P(e.getHours())+r.dash+P(e.getMinutes()),b=r.empty,a.currentView.type!==g.unknownTrendText&&(b=a.currentView.type.toLowerCase().replace(r.space,r.underscore)+
r.underscore),d=b+d+r.underscore+e+"."+a.exportType.toLowerCase(),c.call(f,"download",d),f.click(),E.body.removeChild(f),t(a.onExport,a.currentView.element))}function ja(a){var b={},c=O(a);if(a.exportOnlyYearBeingViewed)for(var d=0;12>d;d++)for(var e=Z(a.currentView.year,d),f=0;f<e;f++){var h=N(new Date(a.currentView.year,d,f+1));c.hasOwnProperty(h)&&(b[h]=c[h])}else{a=[];for(d in c)c.hasOwnProperty(d)&&a.push(d);a.sort();d=a.length;for(e=0;e<d;e++)f=a[e],c.hasOwnProperty(f)&&(b[f]=c[f])}return b}
function ka(a){a=a.toString().replace(/(\r\n|\n|\r)/gm,r.empty).replace(/(\s\s)/gm,r.space);a=a.replace(/"/g,'""');return'"'+a+'"'}function xa(a){a=G(a)?a:{};a.views=G(a.views)?a.views:{};a.showGuide=w(a.showGuide,!0);a.showTitle=w(a.showTitle,!0);a.showYearSelector=w(a.showYearSelector,!0);a.showRefreshButton=w(a.showRefreshButton,!1);a.showExportButton=w(a.showExportButton,!1);a.colorRangeTogglesEnabled=w(a.colorRangeTogglesEnabled,!0);a.exportOnlyYearBeingViewed=w(a.exportOnlyYearBeingViewed,!0);
a.year=ba(a.year,(new Date).getFullYear());a.keepScrollPositions=w(a.keepScrollPositions,!1);a.extraSelectionYears=ba(a.extraSelectionYears,50);a.showYearSelectionDropDown=w(a.showYearSelectionDropDown,!0);a.view=v(a.view,"map");a.tooltipDelay=ba(a.tooltipDelay,750);a.exportType=v(a.exportType,"csv");a.descriptionText=v(a.descriptionText,null);a.descriptionTextLink=v(a.descriptionTextLink,null);a.useLocalStorageForData=w(a.useLocalStorageForData,!1);a.allowFileImports=w(a.allowFileImports,!0);var b=
a;var c=a.yearsToHide;var d=[];c=T(c)?c:d;b.yearsToHide=c;a.showLessAndMoreLabels=w(a.showLessAndMoreLabels,!0);a.showNumbersInGuide=w(a.showNumbersInGuide,!1);a.showImportButton=w(a.showImportButton,!1);a.dataFetchDelay=ba(a.dataFetchDelay,6E4);if(T(a.colorRanges))for(b=a.colorRanges.length,c=0;c<b;c++)d=a.colorRanges[c],d.id=v(d.id,U()),d.name=v(d.name,null),d.minimum=ba(d.minimum,0),d.cssClassName=v(d.cssClassName,null),d.mapCssClassName=v(d.mapCssClassName,null),d.chartCssClassName=v(d.chartCssClassName,
null),d.statisticsCssClassName=v(d.statisticsCssClassName,null),d.tooltipText=v(d.tooltipText,null),d.visible=w(d.visible,!0);else a.colorRanges=[{id:U(),name:"Day Color 1",minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1",visible:!0},{id:U(),name:"Day Color 2",minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2",visible:!0},{id:U(),name:"Day Color 3",minimum:20,cssClassName:"day-color-3",tooltipText:"Day Color 3",visible:!0},{id:U(),name:"Day Color 4",minimum:25,cssClassName:"day-color-4",
tooltipText:"Day Color 4",visible:!0}];if(T(a.holidays))for(b=a.holidays.length,c=0;c<b;c++)d=a.holidays[c],d.date=v(d.date,null),d.name=v(d.name,null),d.showInViews=w(d.showInViews,!0);else a.holidays=[];a.views.map=G(a.views.map)?a.views.map:{};a.views.map.showMonthDayGaps=w(a.views.map.showMonthDayGaps,!0);a.views.map.showDayNames=w(a.views.map.showDayNames,!0);a.views.map.placeMonthNamesOnTheBottom=w(a.views.map.placeMonthNamesOnTheBottom,!1);a.views.map.showDayNumbers=w(a.views.map.showDayNumbers,
!1);a.views.map.showMonthNames=w(a.views.map.showMonthNames,!0);a.views.map.showDaysInReverseOrder=w(a.views.map.showDaysInReverseOrder,!1);a.views.map.showNoDataMessageWhenDataIsNotAvailable=w(a.views.map.showNoDataMessageWhenDataIsNotAvailable,!1);Q(a.views.map.monthsToShow)&&(a.views.map.monthsToShow=sa);Q(a.views.map.daysToShow)&&(a.views.map.daysToShow=ta);a.views.chart=G(a.views.chart)?a.views.chart:{};a.views.chart.enabled=w(a.views.chart.enabled,!0);a.views.chart.showChartYLabels=w(a.views.chart.showChartYLabels,
!0);a.views.chart.showMonthNames=w(a.views.chart.showMonthNames,!0);a.views.chart.showLineNumbers=w(a.views.chart.showLineNumbers,!1);Q(a.views.chart.monthsToShow)&&(a.views.chart.monthsToShow=sa);Q(a.views.chart.daysToShow)&&(a.views.chart.daysToShow=ta);a.views.statistics=G(a.views.statistics)?a.views.statistics:{};a.views.statistics.enabled=w(a.views.statistics.enabled,!0);a.views.statistics.showChartYLabels=w(a.views.statistics.showChartYLabels,!0);a.views.statistics.showColorRangeLabels=w(a.views.statistics.showColorRangeLabels,
!0);a.views.statistics.useColorRangeNamesForLabels=w(a.views.statistics.useColorRangeNamesForLabels,!1);a.views.statistics.showRangeNumbers=w(a.views.statistics.showRangeNumbers,!1);Q(a.views.statistics.monthsToShow)&&(a.views.statistics.monthsToShow=sa);Q(a.views.statistics.daysToShow)&&(a.views.statistics.daysToShow=ta);a.titleText=v(a.titleText,"Heat.js");a.dayToolTipText=v(a.dayToolTipText,"{d}{o} {mmmm} {yyyy}");a.onDayClick=C(a.onDayClick,null);a.onBackYear=C(a.onBackYear,null);a.onNextYear=
C(a.onNextYear,null);a.onRefresh=C(a.onRefresh,null);a.onBeforeRender=C(a.onBeforeRender,null);a.onRenderComplete=C(a.onRenderComplete,null);a.onDestroy=C(a.onDestroy,null);a.onExport=C(a.onExport,null);a.onSetYear=C(a.onSetYear,null);a.onTypeSwitch=C(a.onTypeSwitch,null);a.onDayToolTipRender=C(a.onDayToolTipRender,null);a.onAdd=C(a.onAdd,null);a.onRemove=C(a.onRemove,null);a.onReset=C(a.onReset,null);a.onViewSwitch=C(a.onViewSwitch,null);a.onColorRangeTypeToggle=C(a.onColorRangeTypeToggle,null);
a.onImport=C(a.onImport,null);a.onStatisticClick=C(a.onStatisticClick,null);a.onDataFetch=C(a.onDataFetch,null);a.onClear=C(a.onClear,null);a.onUpdate=C(a.onUpdate,null);return a}function Z(a,b){return(new Date(a,b+1,0)).getDate()}function pa(a){return 0>a.getDay()-1?6:a.getDay()-1}function Da(a,b){var c=a,d=pa(b);c=c.replace("{dddd}",g.dayNames[d]);c=c.replace("{dd}",P(b.getDate()));c=c.replace("{d}",b.getDate());d=c.replace;var e=b.getDate(),f=g.thText;if(31===e||21===e||1===e)f=g.stText;else if(22===
e||2===e)f=g.ndText;else if(23===e||3===e)f=g.rdText;c=d.call(c,"{o}",f);c=c.replace("{mmmm}",g.monthNames[b.getMonth()]);c=c.replace("{mm}",P(b.getMonth()+1));c=c.replace("{m}",b.getMonth()+1);c=c.replace("{yyyy}",b.getFullYear());c=c.replace("{yyy}",b.getFullYear().toString().substring(1));c=c.replace("{yy}",b.getFullYear().toString().substring(2));return c=c.replace("{y}",parseInt(b.getFullYear().toString().substring(2)).toString())}function q(a){return null!==a&&void 0!==a&&a!==r.empty}function G(a){return q(a)&&
"object"===typeof a}function L(a){return q(a)&&"boolean"===typeof a}function n(a){return q(a)&&"string"===typeof a}function M(a){return q(a)&&"function"===typeof a}function X(a){return q(a)&&"number"===typeof a}function T(a){return G(a)&&a instanceof Array}function la(a){return G(a)&&a instanceof Date}function Xa(a){a=a.toLowerCase();var b="text"===a;Y.hasOwnProperty(a)||(Y[a]=b?E.createTextNode(r.empty):E.createElement(a));return Y[a].cloneNode(!1)}function p(a,b,c,d){b=b.toLowerCase();var e="text"===
b;Y.hasOwnProperty(b)||(Y[b]=e?E.createTextNode(r.empty):E.createElement(b));b=Y[b].cloneNode(!1);q(c)&&(b.className=c);q(d)?a.insertBefore(b,d):a.appendChild(b);return b}function u(a,b,c,d,e){a=p(a,b,c,e);a.innerHTML=d;return a}function ha(a,b,c){var d=null;c=q(c)?c:!1;A.getComputedStyle?d=E.defaultView.getComputedStyle(a,null).getPropertyValue(b):a.currentStyle&&(d=a.currentStyle[b]);c&&(d=parseFloat(d,10));return d}function x(a,b){a.className+=r.space+b}function aa(a){a.preventDefault();a.cancelBubble=
!0}function za(a){for(var b=a.children,c=b.length-1;c--;)a.appendChild(b[c])}function t(a){var b=null;M(a)&&(b=a.apply(null,[].slice.call(arguments,1)));return b}function v(a,b){return n(a)?a:b}function w(a,b){return L(a)?a:b}function C(a,b){return M(a)?a:b}function ba(a,b){return X(a)?a:b}function ma(a){var b=!0,c=null;try{n(a)&&(c=ca.parse(a))}catch(d){try{c=eval("("+a+")"),M(c)&&(c=c())}catch(e){g.safeMode||(console.error("Errors in object: "+d.message+", "+e.message),b=!1),c=null}}return{parsed:b,
result:c}}function U(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push(r.dash);var c=K.floor(16*K.random()).toString(16);a.push(c)}return a.join(r.empty)}function P(a){a=a.toString();return 1===a.length?"0"+a:a}function ya(a,b){return a.substring(0,b.length).toLowerCase()===b.toLowerCase()}function N(a){return a.getFullYear()+r.dash+P(a.getMonth()+1)+r.dash+P(a.getDate())}function Ia(a){g=G(a)?a:{};g.safeMode=w(g.safeMode,!0);a=g;var b=g.domElementTypes,c=["*"];n(b)?(b=b.split(r.space),
0===b.length&&(b=c)):b=T(b)?b:c;a.domElementTypes=b;g.stText=v(g.stText,"st");g.ndText=v(g.ndText,"nd");g.rdText=v(g.rdText,"rd");g.thText=v(g.thText,"th");g.backButtonText=v(g.backButtonText,"Back");g.nextButtonText=v(g.nextButtonText,"Next");g.refreshButtonText=v(g.refreshButtonText,"Refresh");g.exportButtonText=v(g.exportButtonText,"Export");g.lessText=v(g.lessText,"Less");g.moreText=v(g.moreText,"More");g.dateText=v(g.dateText,"Date");g.countText=v(g.countText,"Count");g.mapText=v(g.mapText,"Map");
g.chartText=v(g.chartText,"Chart");g.noChartDataMessage=v(g.noChartDataMessage,"There is currently no data to view.");g.statisticsText=v(g.statisticsText,"Statistics");g.noStatisticsDataMessage=v(g.noStatisticsDataMessage,"There are currently no statistics to view.");g.unknownTrendText=v(g.unknownTrendText,"Unknown");g.importButtonText=v(g.importButtonText,"Import");g.noMapDataMessage=v(g.noMapDataMessage,"There is currently no data to view.");Q(g.monthNames,12)&&(g.monthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));
Q(g.dayNames,7)&&(g.dayNames="Mon Tue Wed Thu Fri Sat Sun".split(" "))}function Q(a,b){b=X(b)?b:1;return!T(a)||a.length<b}var E=null,A=null,K=null,ca=null,g={},r={empty:"",space:" ",newLine:"\n",dash:"-",underscore:"_",plus:"+"},H={notFound:-1},sa=[1,2,3,4,5,6,7,8,9,10,11,12],ta=[1,2,3,4,5,6,7],Y={},V=null,k={};this.addDates=function(a,b,c,d){if(n(a)&&T(b)&&k.hasOwnProperty(a)){var e=k[a].options;if(!e.currentView.isInFetchMode){d=L(d)?d:!0;c=n(c)?c:g.unknownTrendText;for(var f=b.length,h=0;h<f;h++)this.addDate(a,
b[h],c,!1);d&&y(e,!0)}}return this};this.addDate=function(a,b,c,d){if(n(a)&&la(b)&&k.hasOwnProperty(a)){var e=k[a].options;e.currentView.isInFetchMode||(d=L(d)?d:!0,c=n(c)?c:g.unknownTrendText,b=N(b),k[a].type.hasOwnProperty(c)||(k[a].type[c]={},k[a].types++),k[a].type[c].hasOwnProperty(b)||(k[a].type[c][b]=0),k[a].type[c][b]++,t(e.onAdd,e.currentView.element),d&&y(e,!0))}return this};this.updateDate=function(a,b,c,d,e){if(n(a)&&la(b)&&k.hasOwnProperty(a)){var f=k[a].options;!f.currentView.isInFetchMode&&
0<c&&(d=n(d)?d:g.unknownTrendText,b=N(b),k[a].type.hasOwnProperty(d)&&(e=L(e)?e:!0,k[a].type[d][b]=c,t(f.onUpdate,f.currentView.element),e&&y(f,!0)))}return this};this.removeDates=function(a,b,c,d){if(n(a)&&T(b)&&k.hasOwnProperty(a)){var e=k[a].options;if(!e.currentView.isInFetchMode){c=n(c)?c:g.unknownTrendText;d=L(d)?d:!0;for(var f=b.length,h=0;h<f;h++)this.removeDate(a,b[h],c,!1);d&&y(e,!0)}}return this};this.removeDate=function(a,b,c,d){if(n(a)&&la(b)&&k.hasOwnProperty(a)){var e=k[a].options;
e.currentView.isInFetchMode||(c=n(c)?c:g.unknownTrendText,b=N(b),k[a].type.hasOwnProperty(c)&&k[a].type[c].hasOwnProperty(b)&&(d=L(d)?d:!0,0<k[a].type[c][b]&&k[a].type[c][b]--,t(e.onRemove,e.currentView.element),d&&y(e,!0)))}return this};this.clearDate=function(a,b,c,d){if(n(a)&&la(b)&&k.hasOwnProperty(a)){var e=k[a].options;e.currentView.isInFetchMode||(c=n(c)?c:g.unknownTrendText,b=N(b),k[a].type.hasOwnProperty(c)&&k[a].type[c].hasOwnProperty(b)&&(d=L(d)?d:!0,delete k[a].type[c][b],t(e.onClear,
e.currentView.element),d&&y(e,!0)))}return this};this.resetAll=function(a){for(var b in k)k.hasOwnProperty(b)&&this.reset(b,a);return this};this.reset=function(a,b){if(n(a)&&k.hasOwnProperty(a)){var c=k[a].options;c.currentView.isInFetchMode||(b=L(b)?b:!0,c.currentView.type=g.unknownTrendText,na(a,c,!1),t(c.onReset,c.currentView.element),b&&y(c,!0))}return this};this["export"]=function(a){n(a)&&k.hasOwnProperty(a)&&Ca(k[a].options);return this};this.refresh=function(a){n(a)&&k.hasOwnProperty(a)&&
(a=k[a].options,y(a,!0),t(a.onRefresh,a.currentView.element));return this};this.refreshAll=function(){for(var a in k)if(k.hasOwnProperty(a)){var b=k[a].options;y(b,!0);t(b.onRefresh,b.currentView.element)}return this};this.setYear=function(a,b){if(n(a)&&X(b)&&k.hasOwnProperty(a)){var c=k[a].options;c.yearsToHide.indexOf(b)===H.notFound&&(c.currentView.year=b,y(c),t(c.onSetYear,c.currentView.year))}return this};this.setYearToHighest=function(a){if(n(a)&&k.hasOwnProperty(a)){a=k[a].options;var b=O(a),
c=0,d;for(d in b)b.hasOwnProperty(d)&&(c=K.max(c,parseInt(d.split(r.dash)[0])));0<c&&a.yearsToHide.indexOf(c)===H.notFound&&(a.currentView.year=c,y(a),t(a.onSetYear,a.currentView.year))}return this};this.setYearToLowest=function(a){if(n(a)&&k.hasOwnProperty(a)){a=k[a].options;var b=O(a),c=9999,d;for(d in b)b.hasOwnProperty(d)&&(c=K.min(c,parseInt(d.split(r.dash)[0])));9999>c&&a.yearsToHide.indexOf(c)===H.notFound&&(a.currentView.year=c,y(a),t(a.onSetYear,a.currentView.year))}return this};this.moveToPreviousYear=
function(a){if(n(a)&&k.hasOwnProperty(a)){a=k[a].options;for(a.currentView.year--;a.yearsToHide.indexOf(a.currentView.year)>H.notFound;)a.currentView.year--;y(a);t(a.onBackYear,a.currentView.year)}return this};this.moveToNextYear=function(a){if(n(a)&&k.hasOwnProperty(a)){a=k[a].options;for(a.currentView.year++;a.yearsToHide.indexOf(a.currentView.year)>H.notFound;)a.currentView.year++;y(a);t(a.onNextYear,a.currentView.year)}return this};this.moveToCurrentYear=function(a){n(a)&&k.hasOwnProperty(a)&&
(a=k[a].options,a.currentView.year=(new Date).getFullYear(),y(a),t(a.onSetYear,a.currentView.year));return this};this.getYear=function(a){var b=null;n(a)&&k.hasOwnProperty(a)&&(b=k[a].options.currentView.year);return b};this.render=function(a,b){G(a)&&G(b)&&va(wa(b,a));return this};this.renderAll=function(){ua();return this};this.switchView=function(a,b){if(n(a)&&n(b)&&k.hasOwnProperty(a)){var c=k[a].options,d=null;"map"===b.toLowerCase()?d=1:"chart"===b.toLowerCase()?d=2:"statistics"===b.toLowerCase()&&
(d=3);X(d)&&(c.currentView.view=d,t(c.onViewSwitch,b),y(c,!1,!0))}return this};this.switchType=function(a,b){if(n(a)&&n(b)&&k.hasOwnProperty(a)&&k[a].type.hasOwnProperty(b)){var c=k[a].options;c.currentView.type!==b&&(c.currentView.type=b,t(c.onTypeSwitch,b),y(c))}return this};this.updateOptions=function(a,b){if(n(a)&&G(b)&&k.hasOwnProperty(a)){var c=k[a].options,d=xa(b),e=!1,f;for(f in d)d.hasOwnProperty(f)&&c.hasOwnProperty(f)&&c[f]!==d[f]&&(c[f]=d[f],e=!0);e&&(y(c,!0),t(c.onRefresh,c.currentView.element))}return this};
this.destroyAll=function(){for(var a in k)if(k.hasOwnProperty(a)){var b=k[a].options;b.currentView.element.innerHTML=r.empty;b.currentView.element.className=r.empty;E.body.removeChild(b.currentView.tooltip);t(b.onDestroy,b.currentView.element)}k={};return this};this.destroy=function(a){if(n(a)&&k.hasOwnProperty(a)){var b=k[a].options;b.currentView.element.innerHTML=r.empty;b.currentView.element.className=r.empty;E.body.removeChild(b.currentView.tooltip);t(b.onDestroy,b.currentView.element);delete k[a]}return this};
this.setConfiguration=function(a,b){if(G(a)){var c=!1,d;for(d in a)a.hasOwnProperty(d)&&g.hasOwnProperty(d)&&g[d]!==a[d]&&(g[d]=a[d],c=!0);c&&(b=q(b)?b:!0,Ia(g),b&&this.refreshAll())}return this};this.getIds=function(){var a=[],b;for(b in k)k.hasOwnProperty(b)&&a.push(b);return a};this.getVersion=function(){return"2.6.0"};(function(a,b,c,d){E=a;A=b;K=c;ca=d;Ia();E.addEventListener("DOMContentLoaded",function(){ua()});A.addEventListener("unload",function(){for(var e in k)if(k.hasOwnProperty(e)){var f=
k[e].options;q(f.currentView.isInFetchModeTimer)&&clearInterval(f.currentView.isInFetchModeTimer)}});q(A.$heat)||(A.$heat=this)})(document,window,Math,JSON)})();
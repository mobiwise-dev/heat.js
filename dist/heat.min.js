/*! Heat.js v1.4.0 | (c) Bunoon 2024 | MIT License */
(function(){function R(){for(var a=f.domElementTypes,c=a.length,b=0;b<c;b++){var d=y.getElementsByTagName(a[b]);d=[].slice.call(d);for(var e=d.length,h=0;h<e;h++){var k=d[h],l=!0;if(r(k)&&k.hasAttribute("data-heat-options")){var v=k.getAttribute("data-heat-options");z(v)?(v=ca(v),v.parsed&&H(v.result)?S(T(v.result,k)):f.safeMode||(console.error("The attribute 'data-heat-options' is not a valid object."),l=!1)):f.safeMode||(console.error("The attribute 'data-heat-options' has not been set correctly."),
l=!1)}if(!l)break}}}function T(a,c){var b=H(a)?a:{};b.showDayNames=t(b.showDayNames,!0);b.showGuide=t(b.showGuide,!0);b.showTitle=t(b.showTitle,!0);b.showYearSelector=t(b.showYearSelector,!0);b.showMonthDayGaps=t(b.showMonthDayGaps,!0);b.showRefreshButton=t(b.showRefreshButton,!1);b.showMonthNames=t(b.showMonthNames,!0);b.showExportButton=t(b.showExportButton,!1);b.mapTogglesEnabled=t(b.mapTogglesEnabled,!0);b.placeMonthNamesOnTheBottom=t(b.placeMonthNamesOnTheBottom,!1);b.exportOnlyYearBeingViewed=
t(b.exportOnlyYearBeingViewed,!0);var d=b;var e=b.year;var h=(new Date).getFullYear();e=M(e)?e:h;d.year=e;b.showDayNumbers=t(b.showDayNumbers,!1);b.keepScrollPositions=t(b.keepScrollPositions,!1);I(b.monthsToShow)&&(b.monthsToShow=[1,2,3,4,5,6,7,8,9,10,11,12]);I(b.daysToShow)&&(b.daysToShow=[1,2,3,4,5,6,7]);d=b.mapRangeColors;e=[{minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1"},{minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2"},{minimum:20,cssClassName:"day-color-3",
tooltipText:"Day Color 3"},{minimum:25,cssClassName:"day-color-4",tooltipText:"Day Color 4"}];d=N(d)?d:e;b.mapRangeColors=d;d=b.mapRangeColors.length;for(e=0;e<d;e++)z(b.mapRangeColors[e].id)||(b.mapRangeColors[e].id=U());b.titleText=u(b.titleText,"Heat.js");b.dayToolTipText=u(b.dayToolTipText,"{d}{o} {mmmm} {yyyy}");b.onDayClick=x(b.onDayClick,null);b.onBackYear=x(b.onBackYear,null);b.onNextYear=x(b.onNextYear,null);b.onRefresh=x(b.onRefresh,null);b.onBeforeRender=x(b.onBeforeRender,null);b.onRenderComplete=
x(b.onRenderComplete,null);b.onDestroy=x(b.onDestroy,null);b.onExport=x(b.onExport,null);b.onSetYear=x(b.onSetYear,null);b.onTypeSwitch=x(b.onTypeSwitch,null);b.onDayToolTipRender=x(b.onDayToolTipRender,null);b.currentView={};b.currentView.element=c;b.currentView.mapContents=null;b.currentView.mapContentsScrollLeft=0;b.currentView.colorsVisible={};b.currentView.year=b.year;b.currentView.type="None";return b}function S(a){p(a.onBeforeRender,a.currentView.element);z(a.currentView.element.id)||(a.currentView.element.id=
U());a.currentView.element.removeAttribute("data-heat-options");V(a.currentView.element.id,a);q(a);p(a.onRenderComplete,a.currentView.element)}function q(a){r(a.currentView.mapContents)&&(a.currentView.mapContentsScrollLeft=a.currentView.mapContents.scrollLeft);a.currentView.element.className="heat-js";a.currentView.element.innerHTML=m.empty;da(a);ea(a)}function da(a){if(a.showTitle||a.showYearSelector||a.showRefreshButton||a.showExportButton){var c=n(a.currentView.element,"div","title-bar");a.showTitle&&
w(c,"div","title",a.titleText);a.showExportButton&&(w(c,"button","export",f.exportButtonText).onclick=function(){var b=g[a.currentView.element.id].type[a.currentView.type];var d=[];var e=[];d.push([B(f.dateText),B(f.countText)].join());for(var h in b)b.hasOwnProperty(h)&&e.push(h);e.sort();if(a.exportOnlyYearBeingViewed)for(e=0;12>e;e++){h=(new Date(a.currentView.year,e+1,0)).getDate();for(var k=0;k<h;k++){var l=J(new Date(a.currentView.year,e,k+1));b.hasOwnProperty(l)&&d.push([B(l),B(b[l])].join())}}else for(h=
e.length,k=0;k<h;k++)l=e[k],b.hasOwnProperty(l)&&d.push([B(l),B(b[l])].join());d=d.join(m.newLine);d!==m.empty&&(b=n(y.body,"a"),b.style.display="none",b.setAttribute("target","_blank"),b.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(d)),d=b.setAttribute,h=new Date,e=A(h.getDate())+"-"+A(h.getMonth()+1)+"-"+h.getFullYear(),h=A(h.getHours())+"-"+A(h.getMinutes()),k=m.empty,"None"!==a.currentView.type&&(k=a.currentView.type.toLowerCase().replace(m.space,"_")+"_"),d.call(b,"download",
k+e+"_"+h+".csv"),b.click(),y.body.removeChild(b));p(a.onExport,a.currentView.element)});a.showRefreshButton&&(w(c,"button","refresh",f.refreshButtonText).onclick=function(){q(a);p(a.onRefresh,a.currentView.element)});a.showYearSelector&&(w(c,"button","back",f.backButtonText).onclick=function(){a.currentView.year--;q(a);p(a.onBackYear,a.currentView.year)},a.currentView.yearText=w(c,"div","year-text",a.currentView.year),w(c,"button","next",f.nextButtonText).onclick=function(){a.currentView.year++;
q(a);p(a.onNextYear,a.currentView.year)})}}function ea(a){a.currentView.mapContents=n(a.currentView.element,"div","map-contents");var c=n(a.currentView.mapContents,"div","map"),b=a.currentView.year,d=!1;fa(a);if(a.showDayNames){var e=n(c,"div","days");if(!a.showMonthNames||a.placeMonthNamesOnTheBottom)e.style.paddingTop="0px",e.style.marginTop=a.placeMonthNamesOnTheBottom?"-2px":"-5px";for(var h=0;7>h;h++)-1<a.daysToShow.indexOf(h+1)&&w(e,"div","day-name",f.dayNames[h])}c=n(c,"div","months");e=a.mapRangeColors.sort(function(ha,
ia){return ia.range-ha.range});for(h=0;12>h;h++)if(-1<a.monthsToShow.indexOf(h+1)){var k=n(c,"div","month");a.showMonthNames&&!a.placeMonthNamesOnTheBottom&&w(k,"div","month-name",f.monthNames[h]);var l=n(k,"div","day-columns"),v=(new Date(b,h+1,0)).getDate(),O=n(l,"div","day-column"),W=!1,C=X(new Date(b,h,1)),P=1;v+=C;for(var D=0;D<v;D++){D>=C?W=!0:n(O,"div","day-disabled");if(W){var E=null;-1<a.daysToShow.indexOf(P)&&(E=ja(a,O,D-C,h,b,e));if(0===(D+1)%7&&(O=n(l,"div","day-column"),P=0,!r(F)&&r(E))){var ka=
Y(E,"margin-left",!0),la=Y(E,"margin-right",!0);F=E.offsetWidth+ka+la}}P++}a.showMonthNames&&a.placeMonthNamesOnTheBottom&&w(k,"div","month-name-bottom",f.monthNames[h]);d&&r(F)&&(0<C&&!a.showMonthDayGaps?k.style.marginLeft=-F+"px":0===C&&a.showMonthDayGaps&&(k.style.marginLeft=F+"px"));d=!0}a.keepScrollPositions&&(a.currentView.mapContents.scrollLeft=a.currentView.mapContentsScrollLeft)}function ja(a,c,b,d,e,h){b+=1;c=n(c,"div","day");var k=new Date(e,d,b),l=g[a.currentView.element.id].type[a.currentView.type][J(k)];
l=M(l)?l:0;G(a.onDayToolTipRender)?c.title=p(a.onDayToolTipRender,k,l):c.title=ma(a.dayToolTipText,k);a.showDayNumbers&&0<l&&(c.innerHTML=l.toString());G(a.onDayClick)?c.onclick=function(){p(a.onDayClick,k,l)}:c.className+=m.space+"no-click";d=a.mapRangeColors.length;e=null;for(b=0;b<d;b++){var v=h[b];if(l>=v.minimum)e=v;else break}r(e)&&Z(a,e.id)&&(c.className+=m.space+e.cssClassName);return c}function fa(a){var c=n(a.currentView.element,"div","guide"),b=n(c,"div","map-types"),d=0;for(h in g[a.currentView.element.id].type.None)if(g[a.currentView.element.id].type.None.hasOwnProperty(h)){d++;
break}if(1<g[a.currentView.element.id].types)for(var e in g[a.currentView.element.id].type)if("None"!==e||0<d)0===d&&"None"===a.currentView.type&&(a.currentView.type=e),na(a,b,e);if(a.showGuide){c=n(c,"div","map-toggles");b=w(c,"div","less-text",f.lessText);a.mapTogglesEnabled?b.onclick=function(){aa(a,!1)}:b.className+=m.space+"no-click";b=n(c,"div","days");d=a.mapRangeColors.sort(function(k,l){return l.range-k.range});var h=d.length;for(e=0;e<h;e++)oa(a,b,d[e]);c=w(c,"div","more-text",f.moreText);
a.mapTogglesEnabled?c.onclick=function(){aa(a,!0)}:c.className+=m.space+"no-click"}}function na(a,c,b){c=w(c,"button","type",b);a.currentView.type===b&&(c.className+=m.space+"active");c.onclick=function(){a.currentView.type!==b&&(a.currentView.type=b,p(a.onTypeSwitch,b),q(a))}}function oa(a,c,b){var d=n(c,"div");d.title=b.tooltipText;Z(a,b.id)?d.className="day "+b.cssClassName:d.className="day";a.mapTogglesEnabled?d.onclick=function(){a.currentView.colorsVisible.hasOwnProperty(b.id)||(a.currentView.colorsVisible[b.id]=
!0);d.className=a.currentView.colorsVisible[b.id]?"day":"day "+b.cssClassName;a.currentView.colorsVisible[b.id]=!a.currentView.colorsVisible[b.id];q(a)}:d.className+=m.space+"no-click"}function Z(a,c){return!a.currentView.colorsVisible.hasOwnProperty(c)||a.currentView.colorsVisible[c]}function V(a,c){g[a]={options:c,type:{},types:1};g[a].type.None={}}function aa(a,c){for(var b=a.mapRangeColors.length,d=0;d<b;d++)a.currentView.colorsVisible[a.mapRangeColors[d].id]=c;q(a)}function B(a){a=a.toString().replace(/(\r\n|\n|\r)/gm,
m.empty).replace(/(\s\s)/gm,m.space);a=a.replace(/"/g,'""');return'"'+a+'"'}function X(a){return 0>a.getDay()-1?6:a.getDay()-1}function ma(a,c){var b=a,d=X(c);b=b.replace("{dddd}",f.dayNames[d]);b=b.replace("{dd}",A(c.getDate()));b=b.replace("{d}",c.getDate());d=b.replace;var e=c.getDate(),h=f.thText;if(31===e||21===e||1===e)h=f.stText;else if(22===e||2===e)h=f.ndText;else if(23===e||3===e)h=f.rdText;b=d.call(b,"{o}",h);b=b.replace("{mmmm}",f.monthNames[c.getMonth()]);b=b.replace("{mm}",A(c.getMonth()+
1));b=b.replace("{m}",c.getMonth()+1);b=b.replace("{yyyy}",c.getFullYear());b=b.replace("{yyy}",c.getFullYear().toString().substring(1));b=b.replace("{yy}",c.getFullYear().toString().substring(2));return b=b.replace("{y}",parseInt(c.getFullYear().toString().substring(2)).toString())}function r(a){return null!==a&&void 0!==a&&a!==m.empty}function H(a){return r(a)&&"object"===typeof a}function K(a){return r(a)&&"boolean"===typeof a}function z(a){return r(a)&&"string"===typeof a}function G(a){return r(a)&&
"function"===typeof a}function M(a){return r(a)&&"number"===typeof a}function N(a){return H(a)&&a instanceof Array}function n(a,c,b){c=c.toLowerCase();var d="text"===c;Q.hasOwnProperty(c)||(Q[c]=d?y.createTextNode(m.empty):y.createElement(c));c=Q[c].cloneNode(!1);r(b)&&(c.className=b);a.appendChild(c);return c}function w(a,c,b,d){a=n(a,c,b);a.innerHTML=d;return a}function Y(a,c,b){var d=null;b=r(b)?b:!1;L.getComputedStyle?d=y.defaultView.getComputedStyle(a,null).getPropertyValue(c):a.currentStyle&&
(d=a.currentStyle[c]);b&&(d=parseFloat(d,10));return d}function p(a){var c=null;G(a)&&(c=a.apply(null,[].slice.call(arguments,1)));return c}function u(a,c){return z(a)?a:c}function t(a,c){return K(a)?a:c}function x(a,c){return G(a)?a:c}function ca(a){var c=!0,b=null;try{z(a)&&(b=JSON.parse(a))}catch(d){try{b=eval("("+a+")"),G(b)&&(b=b())}catch(e){f.safeMode||(console.error("Errors in object: "+d.message+", "+e.message),c=!1),b=null}}return{parsed:c,result:b}}function U(){for(var a=[],c=0;32>c;c++){8!==
c&&12!==c&&16!==c&&20!==c||a.push("-");var b=Math.floor(16*Math.random()).toString(16);a.push(b)}return a.join(m.empty)}function A(a){a=a.toString();return 1===a.length?"0"+a:a}function J(a){return a.getFullYear()+"-"+A(a.getMonth()+1)+"-"+A(a.getDate())}function ba(){f.safeMode=t(f.safeMode,!0);var a=f,c=f.domElementTypes,b=["*"];z(c)?(c=c.split(m.space),0===c.length&&(c=b)):c=N(c)?c:b;a.domElementTypes=c;f.stText=u(f.stText,"st");f.ndText=u(f.ndText,"nd");f.rdText=u(f.rdText,"rd");f.thText=u(f.thText,
"th");f.backButtonText=u(f.backButtonText,"Back");f.nextButtonText=u(f.nextButtonText,"Next");f.refreshButtonText=u(f.refreshButtonText,"Refresh");f.exportButtonText=u(f.exportButtonText,"Export");f.lessText=u(f.lessText,"Less");f.moreText=u(f.moreText,"More");f.dateText=u(f.dateText,"Date");f.countText=u(f.countText,"Count");I(f.monthNames,12)&&(f.monthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));I(f.dayNames,7)&&(f.dayNames="Mon Tue Wed Thu Fri Sat Sun".split(" "))}function I(a,
c){c=M(c)?c:1;return!N(a)||a.length<c}var y=null,L=null,f={},m={empty:"",space:" ",newLine:"\n"},Q={},F=null,g={};this.addDate=function(a,c,b,d){g.hasOwnProperty(a)&&(d=K(d)?d:!0,b=z(b)?b:"None",c=J(c),g[a].type.hasOwnProperty(b)||(g[a].type[b]={},g[a].types++),g[a].type[b].hasOwnProperty(c)||(g[a].type[b][c]=0),g[a].type[b][c]++,d&&q(g[a].options));return this};this.removeDate=function(a,c,b,d){g.hasOwnProperty(a)&&(b=z(b)?b:"None",c=J(c),g[a].type.hasOwnProperty(b)&&g[a].type[b].hasOwnProperty(c)&&
(d=K(d)?d:!0,0<g[a].type[b][c]&&g[a].type[b][c]--,d&&q(g[a].options)));return this};this.reset=function(a,c){if(g.hasOwnProperty(a)){c=K(c)?c:!0;var b=g[a].options;b.currentView.type="None";V(a,b);c&&q(g[a].options)}return this};this.refresh=function(a){g.hasOwnProperty(a)&&(a=g[a].options,q(a),p(a.onRefresh,a.currentView.element));return this};this.refreshAll=function(){for(var a in g)if(g.hasOwnProperty(a)){var c=g[a].options;q(c);p(c.onRefresh,c.currentView.element)}return this};this.setYear=function(a,
c){if(g.hasOwnProperty(a)){var b=g[a].options;b.currentView.year=c;q(b);p(b.onSetYear,b.currentView.year)}return this};this.setYearToHighest=function(a){if(g.hasOwnProperty(a)){a=g[a].options;var c=g[a.currentView.element.id].type[a.currentView.type],b=0,d;for(d in c)c.hasOwnProperty(d)&&(b=Math.max(b,parseInt(d.split("-")[0])));0<b&&(a.currentView.year=b,q(a),p(a.onSetYear,a.currentView.year))}return this};this.setYearToLowest=function(a){if(g.hasOwnProperty(a)){a=g[a].options;var c=g[a.currentView.element.id].type[a.currentView.type],
b=9999,d;for(d in c)c.hasOwnProperty(d)&&(b=Math.min(b,parseInt(d.split("-")[0])));9999>b&&(a.currentView.year=b,q(a),p(a.onSetYear,a.currentView.year))}return this};this.getYear=function(a){var c=null;g.hasOwnProperty(a)&&(c=g[a].options.currentView.year);return c};this.render=function(a,c){S(T(c,a));return this};this.renderAll=function(){R();return this};this.destroyAll=function(){for(var a in g)if(g.hasOwnProperty(a)){var c=g[a].options;c.currentView.element.innerHTML=m.empty;c.currentView.element.className=
m.empty;p(c.onDestroy,c.currentView.element)}g={};return this};this.destroy=function(a){if(g.hasOwnProperty(a)){var c=g[a].options;c.currentView.element.innerHTML=m.empty;c.currentView.element.className=m.empty;p(c.onDestroy,c.currentView.element);delete g[a]}return this};this.setConfiguration=function(a){f=H(a)?a:{};ba();return this};this.getVersion=function(){return"1.4.0"};(function(a,c){y=a;L=c;ba();y.addEventListener("DOMContentLoaded",function(){R()});r(L.$heat)||(L.$heat=this)})(document,window)})();
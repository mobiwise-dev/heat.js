/*! Heat.js v2.2.0 | (c) Bunoon 2024 | MIT License */
(function(){function sa(){for(var a=g.domElementTypes,c=a.length,b=0;b<c;b++){var d=H.getElementsByTagName(a[b]);d=[].slice.call(d);for(var e=d.length,f=0;f<e;f++){var k=d[f],l=!0;if(t(k)&&k.hasAttribute("data-heat-options")){var m=k.getAttribute("data-heat-options");z(m)?(m=fa(m),m.parsed&&L(m.result)?ta(ua(m.result,k)):g.safeMode||(console.error("The attribute 'data-heat-options' is not a valid object."),l=!1)):g.safeMode||(console.error("The attribute 'data-heat-options' has not been set correctly."),
l=!1)}if(!l)break}}}function ua(a,c){var b=L(a)?a:{};b.views=L(b.views)?b.views:{};b.showGuide=v(b.showGuide,!0);b.showTitle=v(b.showTitle,!0);b.showYearSelector=v(b.showYearSelector,!0);b.showRefreshButton=v(b.showRefreshButton,!1);b.showExportButton=v(b.showExportButton,!1);b.mapTogglesEnabled=v(b.mapTogglesEnabled,!0);b.exportOnlyYearBeingViewed=v(b.exportOnlyYearBeingViewed,!0);b.year=ha(b.year,(new Date).getFullYear());b.keepScrollPositions=v(b.keepScrollPositions,!1);b.extraSelectionYears=ha(b.extraSelectionYears,
50);b.showYearSelectionDropDown=v(b.showYearSelectionDropDown,!0);b.view=x(b.view,"map");b.tooltipDelay=ha(b.tooltipDelay,750);b.exportType=x(b.exportType,"csv");b.descriptionText=x(b.descriptionText,null);b.descriptionTextLink=x(b.descriptionTextLink,null);b.useLocalStorageForData=v(b.useLocalStorageForData,!1);b.allowFileImports=v(b.allowFileImports,!0);b.yearsToHide=ia(b.yearsToHide,[]);b.showLessAndMoreLabels=v(b.showLessAndMoreLabels,!0);b.views.map=L(b.views.map)?b.views.map:{};b.views.map.showMonthDayGaps=
v(b.views.map.showMonthDayGaps,!0);b.views.map.showDayNames=v(b.views.map.showDayNames,!0);b.views.map.placeMonthNamesOnTheBottom=v(b.views.map.placeMonthNamesOnTheBottom,!1);b.views.map.showDayNumbers=v(b.views.map.showDayNumbers,!1);b.views.map.showMonthNames=v(b.views.map.showMonthNames,!0);b.views.map.showDaysInReverseOrder=v(b.views.map.showDaysInReverseOrder,!1);M(b.views.map.monthsToShow)&&(b.views.map.monthsToShow=ja);M(b.views.map.daysToShow)&&(b.views.map.daysToShow=ka);b.views.chart=L(b.views.chart)?
b.views.chart:{};b.views.chart.enabled=v(b.views.chart.enabled,!0);b.views.chart.showChartYLabels=v(b.views.chart.showChartYLabels,!0);b.views.chart.showMonthNames=v(b.views.chart.showMonthNames,!0);M(b.views.chart.monthsToShow)&&(b.views.chart.monthsToShow=ja);M(b.views.chart.daysToShow)&&(b.views.chart.daysToShow=ka);b.views.statistics=L(b.views.statistics)?b.views.statistics:{};b.views.statistics.enabled=v(b.views.statistics.enabled,!0);b.views.statistics.showChartYLabels=v(b.views.statistics.showChartYLabels,
!0);b.views.statistics.showColorRangeLabels=v(b.views.statistics.showColorRangeLabels,!0);M(b.views.statistics.monthsToShow)&&(b.views.statistics.monthsToShow=ja);M(b.views.statistics.daysToShow)&&(b.views.statistics.daysToShow=ka);b.colorRanges=ia(b.colorRanges,[{minimum:10,cssClassName:"day-color-1",mapCssClassName:"day-color-1",chartCssClassName:"day-color-1",statisticsCssClassName:"day-color-1",tooltipText:"Day Color 1",visible:!0},{minimum:15,cssClassName:"day-color-2",mapCssClassName:"day-color-2",
chartCssClassName:"day-color-2",statisticsCssClassName:"day-color-2",tooltipText:"Day Color 2",visible:!0},{minimum:20,cssClassName:"day-color-3",mapCssClassName:"day-color-3",chartCssClassName:"day-color-3",statisticsCssClassName:"day-color-3",tooltipText:"Day Color 3",visible:!0},{minimum:25,cssClassName:"day-color-4",mapCssClassName:"day-color-4",chartCssClassName:"day-color-4",statisticsCssClassName:"day-color-4",tooltipText:"Day Color 4",visible:!0}]);for(var d=b.colorRanges.length,e=0;e<d;e++)z(b.colorRanges[e].id)||
(b.colorRanges[e].id=va());b.titleText=x(b.titleText,"Heat.js");b.dayToolTipText=x(b.dayToolTipText,"{d}{o} {mmmm} {yyyy}");b.onDayClick=D(b.onDayClick,null);b.onBackYear=D(b.onBackYear,null);b.onNextYear=D(b.onNextYear,null);b.onRefresh=D(b.onRefresh,null);b.onBeforeRender=D(b.onBeforeRender,null);b.onRenderComplete=D(b.onRenderComplete,null);b.onDestroy=D(b.onDestroy,null);b.onExport=D(b.onExport,null);b.onSetYear=D(b.onSetYear,null);b.onTypeSwitch=D(b.onTypeSwitch,null);b.onDayToolTipRender=D(b.onDayToolTipRender,
null);b.onAdd=D(b.onAdd,null);b.onRemove=D(b.onRemove,null);b.onReset=D(b.onReset,null);b.onViewSwitch=D(b.onViewSwitch,null);b.onColorRangeTypeToggle=D(b.onColorRangeTypeToggle,null);b.onImport=D(b.onImport,null);d=z(b.view)?b.view.toLowerCase():r.empty;b.currentView={};b.currentView.element=c;b.currentView.tooltip=null;b.currentView.tooltipTimer=null;b.currentView.mapContents=null;b.currentView.mapContentsScrollLeft=0;b.currentView.year=b.year;b.currentView.type=g.unknownTrendText;b.views.chart.enabled&&
(b.currentView.chartContents=null,b.currentView.chartContentsScrollLeft=0);b.views.statistics.enabled&&(b.currentView.statisticsContents=null,b.currentView.statisticsContentsScrollLeft=0);b.currentView.view="map"===d?1:"chart"===d?2:"statistics"===d?3:1;return b}function ta(a){p(a.onBeforeRender,a.currentView.element);z(a.currentView.element.id)||(a.currentView.element.id=va());a.currentView.element.className="heat-js";a.currentView.element.removeAttribute("data-heat-options");wa(a.currentView.element.id,
a);w(a);p(a.onRenderComplete,a.currentView.element)}function w(a,c){if(c=t(c)?c:!1){var b=a.currentView.element.id;if(a.useLocalStorageForData&&A.localStorage){if(a.useLocalStorageForData&&A.localStorage){for(var d=A.localStorage.length,e=[],f=0;f<d;f++)xa(A.localStorage.key(f),"HJS_"+b)&&e.push(A.localStorage.key(f));d=e.length;for(f=0;f<d;f++)A.localStorage.removeItem(e[f])}e=X.stringify(h[b].type);A.localStorage.setItem("HJS_"+b,e)}}t(a.currentView.mapContents)&&(a.currentView.mapContentsScrollLeft=
a.currentView.mapContents.scrollLeft);a.views.chart.enabled&&t(a.currentView.chartContents)&&(a.currentView.chartContentsScrollLeft=a.currentView.chartContents.scrollLeft);a.views.statistics.enabled&&t(a.currentView.statisticsContents)&&(a.currentView.statisticsContentsScrollLeft=a.currentView.statisticsContents.scrollLeft);a.currentView.element.innerHTML=r.empty;Fa(a);Ga(a);a.currentView.mapContents=n(a.currentView.element,"div","map-contents");la(a.currentView.mapContents,a);d=n(a.currentView.mapContents,
"div","map");b=a.currentView.year;e=!1;a.views.chart.enabled&&(a.currentView.chartContents=n(a.currentView.element,"div","chart-contents"),la(a.currentView.chartContents,a));a.views.statistics.enabled&&(a.currentView.statisticsContents=n(a.currentView.element,"div","statistics-contents"),la(a.currentView.statisticsContents,a));Ha(a);if(a.views.map.showDayNames){f=n(d,"div","days");if(!a.views.map.showMonthNames||a.views.map.placeMonthNamesOnTheBottom)f.className="days-months-bottom";for(var k=0;7>
k;k++)a.views.map.daysToShow.indexOf(k+1)>I.notFound&&q(f,"div","day-name",g.dayNames[k]);a.views.map.showDaysInReverseOrder&&ya(f)}d=n(d,"div","months");f=Y(a);for(k=0;12>k;k++)if(Z(a.views.map.monthsToShow,k)){var l=n(d,"div","month");a.views.map.showMonthNames&&!a.views.map.placeMonthNamesOnTheBottom&&q(l,"div","month-name",g.monthNames[k]);var m=n(l,"div","day-columns");var y=T(b,k),u=n(m,"div","day-column"),C=!1,E=ma(new Date(b,k,1)),F=1;y+=E;for(var G=0;G<y;G++){G>=E?C=!0:a.views.map.daysToShow.indexOf(F)>
I.notFound&&n(u,"div","day-disabled");if(C){var K=null;a.views.map.daysToShow.indexOf(F)>I.notFound&&(K=Ia(a,u,G-E,k,b,f));if(0===(G+1)%7&&(a.views.map.showDaysInReverseOrder&&ya(u),u=n(m,"div","day-column"),F=0,!t(U)&&t(K))){var ba=aa(K,"margin-left",!0),Ja=aa(K,"margin-right",!0);U=K.offsetWidth+ba+Ja}}F++}a.views.map.showMonthNames&&a.views.map.placeMonthNamesOnTheBottom&&q(l,"div","month-name-bottom",g.monthNames[k]);e&&t(U)&&(0<E&&!a.views.map.showMonthDayGaps?l.style.marginLeft=-U+"px":0===
E&&a.views.map.showMonthDayGaps&&(l.style.marginLeft=U+"px"));e=!0}a.keepScrollPositions&&(a.currentView.mapContents.scrollLeft=a.currentView.mapContentsScrollLeft);if(a.views.chart.enabled){k=n(a.currentView.chartContents,"div","chart");l=n(k,"div","y-labels");b=n(k,"div","day-lines");e=Y(a);d=0;f=P(a);for(m=0;12>m;m++)for(y=T(a.currentView.year,m),u=0;u<y;u++)C=Q(new Date(a.currentView.year,m,u+1)),f.hasOwnProperty(C)&&(d=J.max(d,parseInt(f[C])));m=d;f=a.currentView.year;d=0;0<m&&a.views.chart.showChartYLabels?
(d=q(l,"div","label-0",m.toString()),q(l,"div","label-25",(3*J.floor(m/4)).toString()),q(l,"div","label-50",J.floor(m/2).toString()),q(l,"div","label-75",J.floor(m/4).toString()),q(l,"div","label-100","0"),l.style.width=d.offsetWidth+"px",d=l.offsetWidth+aa(l,"margin-right",!0)):l.parentNode.removeChild(l);if(0===m)a.currentView.chartContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px",k.parentNode.removeChild(k),q(a.currentView.chartContents,"div","no-data-message",g.noChartDataMessage);
else{l=a.currentView.mapContents.offsetHeight/m;for(y=m=k=0;12>y;y++)if(Z(a.views.chart.monthsToShow,y))for(u=T(f,y),C=1,k++,E=0;E<u;E++)a.views.chart.daysToShow.indexOf(C)>I.notFound&&Ka(b,a,E+1,y,f,e,l),0===(E+1)%7&&(C=0),C++,m++;if(a.views.chart.showMonthNames){e=n(a.currentView.chartContents,"div","chart-months");f=b.offsetWidth/k;for(l=k=0;12>l;l++)Z(a.views.chart.monthsToShow,l)&&(q(e,"div","month-name",g.monthNames[l]).style.left=d+f*k+"px",k++);e.style.width=b.offsetWidth+"px";b=n(e,"div",
"month-name-space");b.style.height=e.offsetHeight+"px";b.style.width=d+"px"}a.keepScrollPositions&&(a.currentView.chartContents.scrollLeft=a.currentView.chartContentsScrollLeft)}a.currentView.chartContents.style.display="none"}if(a.views.statistics.enabled){k=n(a.currentView.statisticsContents,"div","statistics");b=n(a.currentView.statisticsContents,"div","statistics-ranges");l=n(k,"div","y-labels");e=n(k,"div","range-lines");d=Y(a);f={};m=0;y=P(a);for(u=f["0"]=0;12>u;u++)for(C=T(a.currentView.year,
u),E=0;E<C;E++)F=Q(new Date(a.currentView.year,u,E+1)),y.hasOwnProperty(F)&&(G=F.split(r.dash),G=new Date(G[2],G[1],G[0]),K=ma(G),Z(a.views.statistics.monthsToShow,G.getMonth())&&a.views.statistics.daysToShow.indexOf(K)>I.notFound&&(F=na(d,y[F]),t(F)?(f.hasOwnProperty(F.minimum.toString())||(f[F.minimum.toString()]=0),f[F.minimum]++,m=J.max(m,f[F.minimum])):f["0"]++));0<m&&a.views.statistics.showChartYLabels?(y=q(l,"div","label-0",m.toString()),q(l,"div","label-25",(3*J.floor(m/4)).toString()),q(l,
"div","label-50",J.floor(m/2).toString()),q(l,"div","label-75",J.floor(m/4).toString()),q(l,"div","label-100","0"),l.style.width=y.offsetWidth+"px",b.style.paddingLeft=l.offsetWidth+aa(l,"margin-right",!0)+"px"):l.parentNode.removeChild(l);if(0===m)a.currentView.statisticsContents.style.minHeight=a.currentView.mapContents.offsetHeight+"px",k.parentNode.removeChild(k),b.parentNode.removeChild(b),q(a.currentView.statisticsContents,"div","no-statistics-message",g.noStatisticsDataMessage);else{k=a.currentView.mapContents.offsetHeight/
m;a.views.statistics.showColorRangeLabels||b.parentNode.removeChild(b);for(var ca in f)if(f.hasOwnProperty(ca)){C=ca;l=f[ca];m=a;E=d;y=k;u=n(e,"div","range-line no-hover");F=E.length;G=null;for(K=0;K<F;K++)if(ba=E[K],C.toString()===ba.minimum.toString()){G=ba;break}C=G;u.style.height=l*y+"px";S(u,m,l.toString());t(C)&&da(m,C.id)&&(z(C.statisticsCssClassName)?B(u,C.statisticsCssClassName):B(u,C.cssClassName));a.views.statistics.showColorRangeLabels&&q(b,"div","range-name",ca+"+")}a.keepScrollPositions&&
(a.currentView.statisticsContents.scrollLeft=a.currentView.statisticsContentsScrollLeft)}a.currentView.statisticsContents.style.display="none"}a.currentView.mapContents.style.display="none";1===a.currentView.view?a.currentView.mapContents.style.display="block":a.views.chart.enabled&&2===a.currentView.view?a.currentView.chartContents.style.display="block":a.views.statistics.enabled&&3===a.currentView.view?a.currentView.statisticsContents.style.display="block":a.currentView.chartContents.style.display=
"block"}function wa(a,c,b){b=t(b)?b:!0;h[a]={options:c,type:{},types:1};h[a].type[g.unknownTrendText]={};if(b&&c.useLocalStorageForData&&A.localStorage)for(c=A.localStorage.length,b=0;b<c;b++){var d=A.localStorage.key(b);if(xa(d,"HJS_")&&(d=A.localStorage.getItem(d),d=fa(d),d.parsed)){h[a].type=d.result;h[a].types=0;for(var e in h[a].type)h[a].type.hasOwnProperty(e)&&h[a].types++}}}function P(a){return h[a.currentView.element.id].type[a.currentView.type]}function Z(a,c){return a.indexOf(c+1)>I.notFound}
function Fa(a){t(a.currentView.tooltip)||(a.currentView.tooltip=n(H.body,"div","heat-js-tooltip"),a.currentView.tooltip.style.display="none",H.body.addEventListener("mousemove",function(){oa(a)}),H.addEventListener("scroll",function(){oa(a)}))}function S(a,c,b){null!==a&&(a.onmousemove=function(d){La(d,c,b)})}function La(a,c,b){V(a);oa(c);c.currentView.tooltipTimer=setTimeout(function(){c.currentView.tooltip.innerHTML=b;c.currentView.tooltip.style.display="block";var d=c.currentView.tooltip,e=a.pageX,
f=a.pageY;var k=H.documentElement;var l=(A.pageXOffset||k.scrollLeft)-(k.clientLeft||0);k=(A.pageYOffset||k.scrollTop)-(k.clientTop||0);d.style.display="block";e+d.offsetWidth>A.innerWidth?e-=d.offsetWidth:e++;f+d.offsetHeight>A.innerHeight?f-=d.offsetHeight:f++;e<l&&(e=a.pageX+1);f<k&&(f=a.pageY+1);d.style.left=e+"px";d.style.top=f+"px"},c.tooltipDelay)}function oa(a){t(a.currentView.tooltip)&&(t(a.currentView.tooltipTimer)&&(clearTimeout(a.currentView.tooltipTimer),a.currentView.tooltipTimer=null),
"block"===a.currentView.tooltip.style.display&&(a.currentView.tooltip.style.display="none"))}function Ga(a){if(a.showTitle||a.showYearSelector||a.showRefreshButton||a.showExportButton){var c=n(a.currentView.element,"div","title-bar"),b=n(c,"div","title");a.views.chart.enabled||a.views.statistics.enabled?n(b,"div","down-arrow"):B(b,"no-click");a.showTitle&&(b.innerHTML+=a.titleText);if(a.views.chart.enabled||a.views.statistics.enabled){b=n(b,"div","titles-list");b=n(b,"div","titles");var d=q(b,"div",
"title",g.mapText);pa(a,d,1,"map");a.views.chart.enabled&&(d=q(b,"div","title",g.chartText),pa(a,d,2,"chart"));a.views.statistics.enabled&&(b=q(b,"div","title",g.statisticsText),pa(a,b,3,"statistics"))}a.showExportButton&&(q(c,"button","export",g.exportButtonText).onclick=function(){za(a)});a.showRefreshButton&&(q(c,"button","refresh",g.refreshButtonText).onclick=function(){w(a);p(a.onRefresh,a.currentView.element)});if(a.showYearSelector){q(c,"button","back",g.backButtonText).onclick=function(){for(a.currentView.year--;a.yearsToHide.indexOf(a.currentView.year)>
I.notFound;)a.currentView.year--;w(a);p(a.onBackYear,a.currentView.year)};a.currentView.yearText=q(c,"div","year-text",a.currentView.year);if(a.showYearSelectionDropDown){n(a.currentView.yearText,"div","down-arrow");b=n(a.currentView.yearText,"div","years-list");d=n(b,"div","years");var e=(new Date).getFullYear(),f=null;b.style.display="block";b.style.visibility="hidden";for(var k=e-a.extraSelectionYears;k<e+a.extraSelectionYears;k++)if(a.yearsToHide.indexOf(k)===I.notFound){var l=Ma(a,d,k);t(f)||
(f=l)}t(f)&&(d.scrollTop=f.offsetTop-d.offsetHeight/2);b.style.display="none";b.style.visibility="visible"}else B(a.currentView.yearText,"no-click");q(c,"button","next",g.nextButtonText).onclick=function(){for(a.currentView.year++;a.yearsToHide.indexOf(a.currentView.year)>I.notFound;)a.currentView.year++;w(a);p(a.onNextYear,a.currentView.year)}}}}function pa(a,c,b,d){a.currentView.view===b?B(c,"title-active"):c.onclick=function(){a.currentView.view=b;p(a.onViewSwitch,d);w(a)}}function Ma(a,c,b){var d=
null;c=q(c,"div","year",b);a.currentView.year!==b?c.onclick=function(){a.currentView.year=b;w(a);p(a.onSetYear,a.currentView.year)}:(B(c,"year-active"),d=c);return d}function Ia(a,c,b,d,e,f){b+=1;c=n(c,"div","day");var k=new Date(e,d,b),l=h[a.currentView.element.id].type[a.currentView.type][Q(k)];l=W(l)?l:0;R(a.onDayToolTipRender)?S(c,a,p(a.onDayToolTipRender,k,l)):S(c,a,Aa(a.dayToolTipText,k));a.views.map.showDayNumbers&&0<l&&(c.innerHTML=l.toString());R(a.onDayClick)?c.onclick=function(){p(a.onDayClick,
k,l)}:B(c,"no-hover");d=na(f,l);t(d)&&da(a,d.id)&&(z(d.mapCssClassName)?B(c,d.mapCssClassName):B(c,d.cssClassName));return c}function Ka(a,c,b,d,e,f,k){var l=new Date(e,d,b);a=n(a,"div","day-line");var m=P(c)[Q(l)];m=W(m)?m:0;R(c.onDayToolTipRender)?S(a,c,p(c.onDayToolTipRender,l,m)):S(a,c,Aa(c.dayToolTipText,l));a.style.height=m*k+"px";R(c.onDayClick)?a.onclick=function(){p(c.onDayClick,l,m)}:B(a,"no-hover");f=na(f,m);t(f)&&da(c,f.id)&&(z(f.chartCssClassName)?B(a,f.chartCssClassName):B(a,f.cssClassName))}
function Ha(a){var c=n(a.currentView.element,"div","guide"),b=n(c,"div","map-types"),d=0;for(e in h[a.currentView.element.id].type[g.unknownTrendText])if(h[a.currentView.element.id].type[g.unknownTrendText].hasOwnProperty(e)){d++;break}if(1<h[a.currentView.element.id].types){if(z(a.descriptionText)){var e=n(c,"div","description");c.parentNode.insertBefore(e,c);Ba(a,e)}for(var f in h[a.currentView.element.id].type)if(f!==g.unknownTrendText||0<d)0===d&&a.currentView.type===g.unknownTrendText&&(a.currentView.type=
f),Na(a,b,f)}else Ba(a,b);if(a.showGuide){c=n(c,"div","map-toggles");a.showLessAndMoreLabels&&(b=q(c,"div","less-text",g.lessText),a.mapTogglesEnabled?b.onclick=function(){Ca(a,!1)}:B(b,"no-click"));b=n(c,"div","days");d=Y(a);f=d.length;for(e=0;e<f;e++)Oa(a,b,d[e]);a.showLessAndMoreLabels&&(c=q(c,"div","more-text",g.moreText),a.mapTogglesEnabled?c.onclick=function(){Ca(a,!0)}:B(c,"no-click"))}}function Na(a,c,b){c=q(c,"button","type",b);a.currentView.type===b&&B(c,"active");c.onclick=function(){a.currentView.type!==
b&&(a.currentView.type=b,p(a.onTypeSwitch,b),w(a))}}function Oa(a,c,b){c=n(c,"div");c.className="day";S(c,a,b.tooltipText);da(a,b.id)&&(1===a.currentView.view&&z(b.mapCssClassName)?B(c,b.mapCssClassName):a.views.chart.enabled&&2===a.currentView.view&&z(b.chartCssClassName)?B(c,b.chartCssClassName):a.views.statistics.enabled&&3===a.currentView.view&&z(b.statisticsCssClassName)?B(c,b.statisticsCssClassName):B(c,b.cssClassName));a.mapTogglesEnabled?c.onclick=function(){for(var d=b.id,e=a.colorRanges.length,
f=0;f<e;f++){var k=a.colorRanges[f];if(k.id===d){k.visible=!(N(k.visible)&&k.visible);p(a.onColorRangeTypeToggle,k.id,k.visible);w(a);break}}}:B(c,"no-hover")}function Ba(a,c){z(a.descriptionText)&&(z(a.descriptionTextLink)?q(c,"a","label",a.descriptionText).href=a.descriptionTextLink:q(c,"span","label",a.descriptionText))}function da(a,c){for(var b=!1,d=a.colorRanges.length,e=0;e<d;e++){var f=a.colorRanges[e];if(f.id===c&&(!N(f.visible)||f.visible)){b=!0;break}}return b}function Ca(a,c){for(var b=
a.colorRanges.length,d=0;d<b;d++)a.colorRanges[d].visible=c,p(a.onColorRangeTypeToggle,a.colorRanges[d].id,c);w(a)}function na(a,c){for(var b=a.length,d=null,e=0;e<b;e++){var f=a[e];if(c>=f.minimum)d=f;else break}return d}function Y(a){return a.colorRanges.sort(function(c,b){return c.minimum-b.minimum})}function la(a,c){c.allowFileImports&&(a.ondragover=V,a.ondragenter=V,a.ondragleave=V,a.ondrop=function(b){V(b);t(A.FileReader)&&0<b.dataTransfer.files.length&&Pa(b.dataTransfer.files,c)})}function Pa(a,
c){for(var b=a.length,d=[],e=P(c),f=function(m,y){d.push(m);for(var u in y)y.hasOwnProperty(u)&&(e.hasOwnProperty(u)||(e[u]=0),e[u]+=y[u]);d.length===b&&(p(c.onImport,c.currentView.element),w(c))},k=0;k<b;k++){var l=a[k];"json"===l.name.split(".").pop().toLowerCase()&&Qa(l,f)}}function Qa(a,c){var b=new FileReader,d=null;b.readAsText(a);b.onloadend=function(){c(a.name,d)};b.onload=function(e){e=fa(e.target.result);e.parsed&&L(e.result)&&(d=e.result)}}function za(a){var c=null;var b=null;"csv"===a.exportType.toLowerCase()?
b="text/csv":"json"===a.exportType.toLowerCase()?b="application/json":"xml"===a.exportType.toLowerCase()&&(b="application/xml");if("csv"===a.exportType.toLowerCase()){var d=qa(a);c=[];for(var e in d)d.hasOwnProperty(e)&&c.push([ea(e),ea(d[e])].join());0<c.length&&c.unshift([ea(g.dateText),ea(g.countText)].join());c=c.join(r.newLine)}else if("json"===a.exportType.toLowerCase())c=X.stringify(qa(a));else if("xml"===a.exportType.toLowerCase()){e=qa(a);c=[];c.push('<?xml version="1.0" ?>');c.push("<Dates>");
for(d in e)e.hasOwnProperty(d)&&(c.push("<Date>"),c.push("<FullDate>"+d+"</FullDate>"),c.push("<Count>"+e[d]+"</Count>"),c.push("</Date>"));c.push("</Dates>");c=c.join(r.newLine)}if(c!==r.empty){e=n(H.body,"a");e.style.display="none";e.setAttribute("target","_blank");e.setAttribute("href","data:"+b+";charset=utf-8,"+encodeURIComponent(c));b=e.setAttribute;c=new Date;d=O(c.getDate())+r.dash+O(c.getMonth()+1)+r.dash+c.getFullYear();c=O(c.getHours())+r.dash+O(c.getMinutes());var f=r.empty;a.currentView.type!==
g.unknownTrendText&&(f=a.currentView.type.toLowerCase().replace(r.space,r.underscore)+r.underscore);d=f+d+r.underscore+c+"."+a.exportType.toLowerCase();b.call(e,"download",d);e.click();H.body.removeChild(e);p(a.onExport,a.currentView.element)}}function qa(a){var c={},b=P(a);if(a.exportOnlyYearBeingViewed)for(var d=0;12>d;d++)for(var e=T(a.currentView.year,d),f=0;f<e;f++){var k=Q(new Date(a.currentView.year,d,f+1));b.hasOwnProperty(k)&&(c[k]=b[k])}else{a=[];for(d in b)b.hasOwnProperty(d)&&a.push(d);
a.sort();d=a.length;for(e=0;e<d;e++)f=a[e],b.hasOwnProperty(f)&&(c[f]=b[f])}return c}function ea(a){a=a.toString().replace(/(\r\n|\n|\r)/gm,r.empty).replace(/(\s\s)/gm,r.space);a=a.replace(/"/g,'""');return'"'+a+'"'}function T(a,c){return(new Date(a,c+1,0)).getDate()}function ma(a){return 0>a.getDay()-1?6:a.getDay()-1}function Aa(a,c){var b=a,d=ma(c);b=b.replace("{dddd}",g.dayNames[d]);b=b.replace("{dd}",O(c.getDate()));b=b.replace("{d}",c.getDate());d=b.replace;var e=c.getDate(),f=g.thText;if(31===
e||21===e||1===e)f=g.stText;else if(22===e||2===e)f=g.ndText;else if(23===e||3===e)f=g.rdText;b=d.call(b,"{o}",f);b=b.replace("{mmmm}",g.monthNames[c.getMonth()]);b=b.replace("{mm}",O(c.getMonth()+1));b=b.replace("{m}",c.getMonth()+1);b=b.replace("{yyyy}",c.getFullYear());b=b.replace("{yyy}",c.getFullYear().toString().substring(1));b=b.replace("{yy}",c.getFullYear().toString().substring(2));return b=b.replace("{y}",parseInt(c.getFullYear().toString().substring(2)).toString())}function t(a){return null!==
a&&void 0!==a&&a!==r.empty}function L(a){return t(a)&&"object"===typeof a}function N(a){return t(a)&&"boolean"===typeof a}function z(a){return t(a)&&"string"===typeof a}function R(a){return t(a)&&"function"===typeof a}function W(a){return t(a)&&"number"===typeof a}function Da(a){return L(a)&&a instanceof Array}function n(a,c,b){c=c.toLowerCase();var d="text"===c;ra.hasOwnProperty(c)||(ra[c]=d?H.createTextNode(r.empty):H.createElement(c));c=ra[c].cloneNode(!1);t(b)&&(c.className=b);a.appendChild(c);
return c}function q(a,c,b,d){a=n(a,c,b);a.innerHTML=d;return a}function aa(a,c,b){var d=null;b=t(b)?b:!1;A.getComputedStyle?d=H.defaultView.getComputedStyle(a,null).getPropertyValue(c):a.currentStyle&&(d=a.currentStyle[c]);b&&(d=parseFloat(d,10));return d}function B(a,c){a.className+=r.space+c}function V(a){a.preventDefault();a.cancelBubble=!0}function ya(a){for(var c=a.children,b=c.length-1;b--;)a.appendChild(c[b])}function p(a){var c=null;R(a)&&(c=a.apply(null,[].slice.call(arguments,1)));return c}
function x(a,c){return z(a)?a:c}function v(a,c){return N(a)?a:c}function D(a,c){return R(a)?a:c}function ia(a,c){return Da(a)?a:c}function ha(a,c){return W(a)?a:c}function fa(a){var c=!0,b=null;try{z(a)&&(b=X.parse(a))}catch(d){try{b=eval("("+a+")"),R(b)&&(b=b())}catch(e){g.safeMode||(console.error("Errors in object: "+d.message+", "+e.message),c=!1),b=null}}return{parsed:c,result:b}}function va(){for(var a=[],c=0;32>c;c++){8!==c&&12!==c&&16!==c&&20!==c||a.push(r.dash);var b=J.floor(16*J.random()).toString(16);
a.push(b)}return a.join(r.empty)}function O(a){a=a.toString();return 1===a.length?"0"+a:a}function xa(a,c){return a.substring(0,c.length).toLowerCase()===c.toLowerCase()}function Q(a){return a.getFullYear()+r.dash+O(a.getMonth()+1)+r.dash+O(a.getDate())}function Ea(a){g=L(a)?a:{};g.safeMode=v(g.safeMode,!0);a=g;var c=g.domElementTypes,b=["*"];z(c)?(c=c.split(r.space),0===c.length&&(c=b)):c=ia(c,b);a.domElementTypes=c;g.stText=x(g.stText,"st");g.ndText=x(g.ndText,"nd");g.rdText=x(g.rdText,"rd");g.thText=
x(g.thText,"th");g.backButtonText=x(g.backButtonText,"Back");g.nextButtonText=x(g.nextButtonText,"Next");g.refreshButtonText=x(g.refreshButtonText,"Refresh");g.exportButtonText=x(g.exportButtonText,"Export");g.lessText=x(g.lessText,"Less");g.moreText=x(g.moreText,"More");g.dateText=x(g.dateText,"Date");g.countText=x(g.countText,"Count");g.mapText=x(g.mapText,"Map");g.chartText=x(g.chartText,"Chart");g.noChartDataMessage=x(g.noChartDataMessage,"There is currently no data to view.");g.statisticsText=
x(g.statisticsText,"Statistics");g.noStatisticsDataMessage=x(g.noStatisticsDataMessage,"There are currently no statistics to view.");g.unknownTrendText=x(g.unknownTrendText,"Unknown");M(g.monthNames,12)&&(g.monthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));M(g.dayNames,7)&&(g.dayNames="Mon Tue Wed Thu Fri Sat Sun".split(" "))}function M(a,c){c=W(c)?c:1;return!Da(a)||a.length<c}var H=null,A=null,J=null,X=null,g={},r={empty:"",space:" ",newLine:"\n",dash:"-",underscore:"_"},I=
{notFound:-1},ja=[1,2,3,4,5,6,7,8,9,10,11,12],ka=[1,2,3,4,5,6,7],ra={},U=null,h={};this.addDates=function(a,c,b,d){if(h.hasOwnProperty(a)){d=N(d)?d:!0;b=z(b)?b:g.unknownTrendText;for(var e=c.length,f=0;f<e;f++)this.addDate(a,c[f],b,!1);d&&w(h[a].options,!0)}return this};this.addDate=function(a,c,b,d){h.hasOwnProperty(a)&&(d=N(d)?d:!0,b=z(b)?b:g.unknownTrendText,c=Q(c),h[a].type.hasOwnProperty(b)||(h[a].type[b]={},h[a].types++),h[a].type[b].hasOwnProperty(c)||(h[a].type[b][c]=0),h[a].type[b][c]++,
a=h[a].options,p(a.onAdd,a.currentView.element),d&&w(a,!0));return this};this.removeDates=function(a,c,b,d){if(h.hasOwnProperty(a)){b=z(b)?b:g.unknownTrendText;d=N(d)?d:!0;for(var e=c.length,f=0;f<e;f++)this.removeDate(a,c[f],b,!1);d&&w(h[a].options,!0)}return this};this.removeDate=function(a,c,b,d){h.hasOwnProperty(a)&&(b=z(b)?b:g.unknownTrendText,c=Q(c),h[a].type.hasOwnProperty(b)&&h[a].type[b].hasOwnProperty(c)&&(d=N(d)?d:!0,0<h[a].type[b][c]&&h[a].type[b][c]--,a=h[a].options,p(a.onRemove,a.currentView.element),
d&&w(a,!0)));return this};this.resetAll=function(a){for(var c in h)h.hasOwnProperty(c)&&this.reset(c,a);return this};this.reset=function(a,c){if(h.hasOwnProperty(a)){c=N(c)?c:!0;var b=h[a].options;b.currentView.type=g.unknownTrendText;wa(a,b,!1);p(b.onReset,b.currentView.element);c&&w(b,!0)}return this};this["export"]=function(a){h.hasOwnProperty(a)&&za(h[a].options);return this};this.refresh=function(a){h.hasOwnProperty(a)&&(a=h[a].options,w(a,!0),p(a.onRefresh,a.currentView.element));return this};
this.refreshAll=function(){for(var a in h)if(h.hasOwnProperty(a)){var c=h[a].options;w(c,!0);p(c.onRefresh,c.currentView.element)}return this};this.setYear=function(a,c){if(h.hasOwnProperty(a)){var b=h[a].options;b.yearsToHide.indexOf(c)===I.notFound&&(b.currentView.year=c,w(b),p(b.onSetYear,b.currentView.year))}return this};this.setYearToHighest=function(a){if(h.hasOwnProperty(a)){a=h[a].options;var c=P(a),b=0,d;for(d in c)c.hasOwnProperty(d)&&(b=J.max(b,parseInt(d.split(r.dash)[0])));0<b&&a.yearsToHide.indexOf(b)===
I.notFound&&(a.currentView.year=b,w(a),p(a.onSetYear,a.currentView.year))}return this};this.setYearToLowest=function(a){if(h.hasOwnProperty(a)){a=h[a].options;var c=P(a),b=9999,d;for(d in c)c.hasOwnProperty(d)&&(b=J.min(b,parseInt(d.split(r.dash)[0])));9999>b&&a.yearsToHide.indexOf(b)===I.notFound&&(a.currentView.year=b,w(a),p(a.onSetYear,a.currentView.year))}return this};this.moveToPreviousYear=function(a){if(h.hasOwnProperty(a)){a=h[a].options;for(a.currentView.year--;a.yearsToHide.indexOf(a.currentView.year)>
I.notFound;)a.currentView.year--;w(a);p(a.onBackYear,a.currentView.year)}return this};this.moveToNextYear=function(a){if(h.hasOwnProperty(a)){a=h[a].options;for(a.currentView.year++;a.yearsToHide.indexOf(a.currentView.year)>I.notFound;)a.currentView.year++;w(a);p(a.onNextYear,a.currentView.year)}return this};this.moveToCurrentYear=function(a){h.hasOwnProperty(a)&&(a=h[a].options,a.currentView.year=(new Date).getFullYear(),w(a),p(a.onSetYear,a.currentView.year));return this};this.getYear=function(a){var c=
null;h.hasOwnProperty(a)&&(c=h[a].options.currentView.year);return c};this.render=function(a,c){ta(ua(c,a));return this};this.renderAll=function(){sa();return this};this.switchView=function(a,c){if(h.hasOwnProperty(a)){var b=h[a].options,d=null;"map"===c.toLowerCase()?d=1:"chart"===c.toLowerCase()?d=2:"statistics"===c.toLowerCase()&&(d=3);W(d)&&(b.currentView.view=d,p(b.onViewSwitch,c),w(b))}return this};this.switchType=function(a,c){if(h.hasOwnProperty(a)&&h[a].type.hasOwnProperty(c)){var b=h[a].options;
b.currentView.type!==c&&(b.currentView.type=c,p(b.onTypeSwitch,c),w(b))}return this};this.destroyAll=function(){for(var a in h)if(h.hasOwnProperty(a)){var c=h[a].options;c.currentView.element.innerHTML=r.empty;c.currentView.element.className=r.empty;H.body.removeChild(c.currentView.tooltip);p(c.onDestroy,c.currentView.element)}h={};return this};this.destroy=function(a){if(h.hasOwnProperty(a)){var c=h[a].options;c.currentView.element.innerHTML=r.empty;c.currentView.element.className=r.empty;H.body.removeChild(c.currentView.tooltip);
p(c.onDestroy,c.currentView.element);delete h[a]}return this};this.setConfiguration=function(a,c){c=t(c)?c:!0;for(var b in a)a.hasOwnProperty(b)&&(g[b]=a[b]);Ea(g);c&&this.refreshAll();return this};this.getIds=function(){var a=[],c;for(c in h)h.hasOwnProperty(c)&&a.push(c);return a};this.getVersion=function(){return"2.2.0"};(function(a,c,b,d){H=a;A=c;J=b;X=d;Ea();H.addEventListener("DOMContentLoaded",function(){sa()});t(A.$heat)||(A.$heat=this)})(document,window,Math,JSON)})();
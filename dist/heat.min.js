/*! Heat.js v1.5.0 | (c) Bunoon 2024 | MIT License */
(function(){function U(){for(var a=f.domElementTypes,c=a.length,b=0;b<c;b++){var d=A.getElementsByTagName(a[b]);d=[].slice.call(d);for(var e=d.length,g=0;g<e;g++){var k=d[g],m=!0;if(v(k)&&k.hasAttribute("data-heat-options")){var l=k.getAttribute("data-heat-options");B(l)?(l=ea(l),l.parsed&&L(l.result)?V(W(l.result,k)):f.safeMode||(console.error("The attribute 'data-heat-options' is not a valid object."),m=!1)):f.safeMode||(console.error("The attribute 'data-heat-options' has not been set correctly."),
m=!1)}if(!m)break}}}function W(a,c){var b=L(a)?a:{};b.showDayNames=x(b.showDayNames,!0);b.showGuide=x(b.showGuide,!0);b.showTitle=x(b.showTitle,!0);b.showYearSelector=x(b.showYearSelector,!0);b.showMonthDayGaps=x(b.showMonthDayGaps,!0);b.showRefreshButton=x(b.showRefreshButton,!1);b.showMonthNames=x(b.showMonthNames,!0);b.showExportButton=x(b.showExportButton,!1);b.mapTogglesEnabled=x(b.mapTogglesEnabled,!0);b.placeMonthNamesOnTheBottom=x(b.placeMonthNamesOnTheBottom,!1);b.exportOnlyYearBeingViewed=
x(b.exportOnlyYearBeingViewed,!0);var d=b;var e=b.year;var g=(new Date).getFullYear();e=H(e)?e:g;d.year=e;b.showDayNumbers=x(b.showDayNumbers,!1);b.keepScrollPositions=x(b.keepScrollPositions,!1);d=b;e=b.extraSelectionYears;e=H(e)?e:50;d.extraSelectionYears=e;b.showYearSelectionDropDown=x(b.showYearSelectionDropDown,!0);M(b.monthsToShow)&&(b.monthsToShow=[1,2,3,4,5,6,7,8,9,10,11,12]);M(b.daysToShow)&&(b.daysToShow=[1,2,3,4,5,6,7]);d=b.mapRangeColors;e=[{minimum:10,cssClassName:"day-color-1",tooltipText:"Day Color 1"},
{minimum:15,cssClassName:"day-color-2",tooltipText:"Day Color 2"},{minimum:20,cssClassName:"day-color-3",tooltipText:"Day Color 3"},{minimum:25,cssClassName:"day-color-4",tooltipText:"Day Color 4"}];d=Q(d)?d:e;b.mapRangeColors=d;d=b.mapRangeColors.length;for(e=0;e<d;e++)B(b.mapRangeColors[e].id)||(b.mapRangeColors[e].id=X());b.titleText=w(b.titleText,"Heat.js");b.dayToolTipText=w(b.dayToolTipText,"{d}{o} {mmmm} {yyyy}");b.onDayClick=y(b.onDayClick,null);b.onBackYear=y(b.onBackYear,null);b.onNextYear=
y(b.onNextYear,null);b.onRefresh=y(b.onRefresh,null);b.onBeforeRender=y(b.onBeforeRender,null);b.onRenderComplete=y(b.onRenderComplete,null);b.onDestroy=y(b.onDestroy,null);b.onExport=y(b.onExport,null);b.onSetYear=y(b.onSetYear,null);b.onTypeSwitch=y(b.onTypeSwitch,null);b.onDayToolTipRender=y(b.onDayToolTipRender,null);b.onAdd=y(b.onAdd,null);b.onRemove=y(b.onRemove,null);b.onReset=y(b.onReset,null);b.currentView={};b.currentView.element=c;b.currentView.mapContents=null;b.currentView.mapContentsScrollLeft=
0;b.currentView.chartContents=null;b.currentView.chartContentsScrollLeft=0;b.currentView.colorsVisible={};b.currentView.year=b.year;b.currentView.type="None";b.currentView.view=1;return b}function V(a){q(a.onBeforeRender,a.currentView.element);B(a.currentView.element.id)||(a.currentView.element.id=X());a.currentView.element.removeAttribute("data-heat-options");Y(a.currentView.element.id,a);t(a);q(a.onRenderComplete,a.currentView.element)}function t(a){v(a.currentView.mapContents)&&(a.currentView.mapContentsScrollLeft=
a.currentView.mapContents.scrollLeft);v(a.currentView.chartContents)&&(a.currentView.chartContentsScrollLeft=a.currentView.chartContents.scrollLeft);a.currentView.element.className="heat-js";a.currentView.element.innerHTML=p.empty;fa(a);ha(a);ia(a);1===a.currentView.view?(a.currentView.mapContents.style.display="block",a.currentView.chartContents.style.display="none"):(a.currentView.mapContents.style.display="none",a.currentView.chartContents.style.display="block")}function R(a,c){return!a.currentView.colorsVisible.hasOwnProperty(c)||
a.currentView.colorsVisible[c]}function Y(a,c){h[a]={options:c,type:{},types:1};h[a].type.None={}}function Z(a,c){for(var b=a.mapRangeColors.length,d=0;d<b;d++)a.currentView.colorsVisible[a.mapRangeColors[d].id]=c;t(a)}function ja(a){for(var c=0,b=h[a.currentView.element.id].type[a.currentView.type],d=0;12>d;d++)for(var e=N(a.currentView.year,d),g=0;g<e;g++){var k=F(new Date(a.currentView.year,d,g+1));b.hasOwnProperty(k)&&(c=Math.max(c,parseInt(b[k])))}return c}function fa(a){if(a.showTitle||a.showYearSelector||
a.showRefreshButton||a.showExportButton){var c=n(a.currentView.element,"div","title-bar");if(a.showTitle){var b=u(c,"div","title",a.titleText);b=n(b,"div","titles-list");var d=n(b,"div","titles");b=u(d,"div","title",f.mapText);d=u(d,"div","title",f.chartText);1!==a.currentView.view?b.onclick=function(){a.currentView.view=1;t(a);q(a.onNextYear,a.currentView.year)}:b.className+=p.space+"title-active";2!==a.currentView.view?d.onclick=function(){a.currentView.view=2;t(a);q(a.onNextYear,a.currentView.year)}:
d.className+=p.space+"title-active"}a.showExportButton&&(u(c,"button","export",f.exportButtonText).onclick=function(){var g=h[a.currentView.element.id].type[a.currentView.type];var k=[];var m=[];k.push([G(f.dateText),G(f.countText)].join());for(var l in g)g.hasOwnProperty(l)&&m.push(l);m.sort();if(a.exportOnlyYearBeingViewed)for(m=0;12>m;m++){l=N(a.currentView.year,m);for(var r=0;r<l;r++){var z=F(new Date(a.currentView.year,m,r+1));g.hasOwnProperty(z)&&k.push([G(z),G(g[z])].join())}}else for(l=m.length,
r=0;r<l;r++)z=m[r],g.hasOwnProperty(z)&&k.push([G(z),G(g[z])].join());k=k.join(p.newLine);k!==p.empty&&(g=n(A.body,"a"),g.style.display="none",g.setAttribute("target","_blank"),g.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(k)),k=g.setAttribute,l=new Date,m=C(l.getDate())+"-"+C(l.getMonth()+1)+"-"+l.getFullYear(),l=C(l.getHours())+"-"+C(l.getMinutes()),r=p.empty,"None"!==a.currentView.type&&(r=a.currentView.type.toLowerCase().replace(p.space,"_")+"_"),k.call(g,"download",
r+m+"_"+l+".csv"),g.click(),A.body.removeChild(g));q(a.onExport,a.currentView.element)});a.showRefreshButton&&(u(c,"button","refresh",f.refreshButtonText).onclick=function(){t(a);q(a.onRefresh,a.currentView.element)});if(a.showYearSelector){u(c,"button","back",f.backButtonText).onclick=function(){a.currentView.year--;t(a);q(a.onBackYear,a.currentView.year)};a.currentView.yearText=u(c,"div","year-text",a.currentView.year);if(a.showYearSelectionDropDown){b=n(a.currentView.yearText,"div","years-list");
b=n(b,"div","years");d=(new Date).getFullYear();for(var e=d-a.extraSelectionYears;e<d+a.extraSelectionYears;e++)ka(a,b,e)}u(c,"button","next",f.nextButtonText).onclick=function(){a.currentView.year++;t(a);q(a.onNextYear,a.currentView.year)}}}}function ka(a,c,b){c=u(c,"div","year",b);a.currentView.year!==b?c.onclick=function(){a.currentView.year=b;t(a);q(a.onNextYear,a.currentView.year)}:c.className+=p.space+"year-active"}function ha(a){a.currentView.mapContents=n(a.currentView.element,"div","map-contents");
var c=n(a.currentView.mapContents,"div","map"),b=a.currentView.year,d=!1;a.currentView.chartContents=n(a.currentView.element,"div","chart-contents");la(a);if(a.showDayNames){var e=n(c,"div","days");if(!a.showMonthNames||a.placeMonthNamesOnTheBottom)e.style.paddingTop="0px",e.style.marginTop=a.placeMonthNamesOnTheBottom?"-2px":"-5px";for(var g=0;7>g;g++)-1<a.daysToShow.indexOf(g+1)&&u(e,"div","day-name",f.dayNames[g])}c=n(c,"div","months");e=a.mapRangeColors.sort(function(ma,na){return na.range-ma.range});
for(g=0;12>g;g++)if(-1<a.monthsToShow.indexOf(g+1)){var k=n(c,"div","month");a.showMonthNames&&!a.placeMonthNamesOnTheBottom&&u(k,"div","month-name",f.monthNames[g]);var m=n(k,"div","day-columns"),l=N(b,g),r=n(m,"div","day-column"),z=!1,D=aa(new Date(b,g,1)),S=1;l+=D;for(var I=0;I<l;I++){I>=D?z=!0:n(r,"div","day-disabled");if(z){var J=null;-1<a.daysToShow.indexOf(S)&&(J=oa(a,r,I-D,g,b,e));if(0===(I+1)%7&&(r=n(m,"div","day-column"),S=0,!v(K)&&v(J))){var pa=ba(J,"margin-left",!0),qa=ba(J,"margin-right",
!0);K=J.offsetWidth+pa+qa}}S++}a.showMonthNames&&a.placeMonthNamesOnTheBottom&&u(k,"div","month-name-bottom",f.monthNames[g]);d&&v(K)&&(0<D&&!a.showMonthDayGaps?k.style.marginLeft=-K+"px":0===D&&a.showMonthDayGaps&&(k.style.marginLeft=K+"px"));d=!0}a.keepScrollPositions&&(a.currentView.mapContents.scrollLeft=a.currentView.mapContentsScrollLeft)}function oa(a,c,b,d,e,g){b+=1;c=n(c,"div","day");var k=new Date(e,d,b),m=h[a.currentView.element.id].type[a.currentView.type][F(k)];m=H(m)?m:0;E(a.onDayToolTipRender)?
c.title=q(a.onDayToolTipRender,k,m):c.title=ca(a.dayToolTipText,k);a.showDayNumbers&&0<m&&(c.innerHTML=m.toString());E(a.onDayClick)?c.onclick=function(){q(a.onDayClick,k,m)}:c.className+=p.space+"no-click";d=a.mapRangeColors.length;e=null;for(b=0;b<d;b++){var l=g[b];if(m>=l.minimum)e=l;else break}v(e)&&R(a,e.id)&&(c.className+=p.space+e.cssClassName);return c}function ia(a){var c=n(a.currentView.chartContents,"div","chart"),b=n(c,"div","labels");c=n(c,"div","day-lines");var d=a.mapRangeColors.sort(function(z,
D){return D.range-z.range}),e=ja(a),g=a.currentView.mapContents.offsetHeight/e,k=a.currentView.year,m=0;0<e&&(u(b,"div","label-top",e.toString()),u(b,"div","label-bottom","0"));for(b=0;12>b;b++)if(-1<a.monthsToShow.indexOf(b+1)){e=N(k,b);for(var l=1,r=0;r<e;r++)-1<a.daysToShow.indexOf(l)&&ra(c,a,r+1,b,k,d,g),0===(r+1)%7&&(l=0),l++,m++}a.keepScrollPositions&&(a.currentView.chartContents.scrollLeft=a.currentView.chartContentsScrollLeft)}function ra(a,c,b,d,e,g,k){var m=new Date(e,d,b);b=n(a,"div","day-line");
var l=h[c.currentView.element.id].type[c.currentView.type][F(m)];l=H(l)?l:0;E(c.onDayToolTipRender)?b.title=q(c.onDayToolTipRender,m,l):b.title=ca(c.dayToolTipText,m);b.style.height=l*k+"px";b.offsetHeight>a.offsetHeight/2&&(b.style.height=b.offsetHeight-5+"px");E(c.onDayClick)?b.onclick=function(){q(c.onDayClick,m,l)}:b.className+=p.space+"no-click";a=c.mapRangeColors.length;k=null;for(d=0;d<a;d++)if(e=g[d],l>=e.minimum)k=e;else break;v(k)&&R(c,k.id)&&(b.className+=p.space+k.cssClassName)}function la(a){var c=
n(a.currentView.element,"div","guide"),b=n(c,"div","map-types"),d=0;for(g in h[a.currentView.element.id].type.None)if(h[a.currentView.element.id].type.None.hasOwnProperty(g)){d++;break}if(1<h[a.currentView.element.id].types)for(var e in h[a.currentView.element.id].type)if("None"!==e||0<d)0===d&&"None"===a.currentView.type&&(a.currentView.type=e),sa(a,b,e);if(a.showGuide){c=n(c,"div","map-toggles");b=u(c,"div","less-text",f.lessText);a.mapTogglesEnabled?b.onclick=function(){Z(a,!1)}:b.className+=p.space+
"no-click";b=n(c,"div","days");d=a.mapRangeColors.sort(function(k,m){return m.range-k.range});var g=d.length;for(e=0;e<g;e++)ta(a,b,d[e]);c=u(c,"div","more-text",f.moreText);a.mapTogglesEnabled?c.onclick=function(){Z(a,!0)}:c.className+=p.space+"no-click"}}function sa(a,c,b){c=u(c,"button","type",b);a.currentView.type===b&&(c.className+=p.space+"active");c.onclick=function(){a.currentView.type!==b&&(a.currentView.type=b,q(a.onTypeSwitch,b),t(a))}}function ta(a,c,b){var d=n(c,"div");d.title=b.tooltipText;
R(a,b.id)?d.className="day "+b.cssClassName:d.className="day";a.mapTogglesEnabled?d.onclick=function(){a.currentView.colorsVisible.hasOwnProperty(b.id)||(a.currentView.colorsVisible[b.id]=!0);d.className=a.currentView.colorsVisible[b.id]?"day":"day "+b.cssClassName;a.currentView.colorsVisible[b.id]=!a.currentView.colorsVisible[b.id];t(a)}:d.className+=p.space+"no-click"}function G(a){a=a.toString().replace(/(\r\n|\n|\r)/gm,p.empty).replace(/(\s\s)/gm,p.space);a=a.replace(/"/g,'""');return'"'+a+'"'}
function N(a,c){return(new Date(a,c+1,0)).getDate()}function aa(a){return 0>a.getDay()-1?6:a.getDay()-1}function ca(a,c){var b=a,d=aa(c);b=b.replace("{dddd}",f.dayNames[d]);b=b.replace("{dd}",C(c.getDate()));b=b.replace("{d}",c.getDate());d=b.replace;var e=c.getDate(),g=f.thText;if(31===e||21===e||1===e)g=f.stText;else if(22===e||2===e)g=f.ndText;else if(23===e||3===e)g=f.rdText;b=d.call(b,"{o}",g);b=b.replace("{mmmm}",f.monthNames[c.getMonth()]);b=b.replace("{mm}",C(c.getMonth()+1));b=b.replace("{m}",
c.getMonth()+1);b=b.replace("{yyyy}",c.getFullYear());b=b.replace("{yyy}",c.getFullYear().toString().substring(1));b=b.replace("{yy}",c.getFullYear().toString().substring(2));return b=b.replace("{y}",parseInt(c.getFullYear().toString().substring(2)).toString())}function v(a){return null!==a&&void 0!==a&&a!==p.empty}function L(a){return v(a)&&"object"===typeof a}function O(a){return v(a)&&"boolean"===typeof a}function B(a){return v(a)&&"string"===typeof a}function E(a){return v(a)&&"function"===typeof a}
function H(a){return v(a)&&"number"===typeof a}function Q(a){return L(a)&&a instanceof Array}function n(a,c,b){c=c.toLowerCase();var d="text"===c;T.hasOwnProperty(c)||(T[c]=d?A.createTextNode(p.empty):A.createElement(c));c=T[c].cloneNode(!1);v(b)&&(c.className=b);a.appendChild(c);return c}function u(a,c,b,d){a=n(a,c,b);a.innerHTML=d;return a}function ba(a,c,b){var d=null;b=v(b)?b:!1;P.getComputedStyle?d=A.defaultView.getComputedStyle(a,null).getPropertyValue(c):a.currentStyle&&(d=a.currentStyle[c]);
b&&(d=parseFloat(d,10));return d}function q(a){var c=null;E(a)&&(c=a.apply(null,[].slice.call(arguments,1)));return c}function w(a,c){return B(a)?a:c}function x(a,c){return O(a)?a:c}function y(a,c){return E(a)?a:c}function ea(a){var c=!0,b=null;try{B(a)&&(b=JSON.parse(a))}catch(d){try{b=eval("("+a+")"),E(b)&&(b=b())}catch(e){f.safeMode||(console.error("Errors in object: "+d.message+", "+e.message),c=!1),b=null}}return{parsed:c,result:b}}function X(){for(var a=[],c=0;32>c;c++){8!==c&&12!==c&&16!==
c&&20!==c||a.push("-");var b=Math.floor(16*Math.random()).toString(16);a.push(b)}return a.join(p.empty)}function C(a){a=a.toString();return 1===a.length?"0"+a:a}function F(a){return a.getFullYear()+"-"+C(a.getMonth()+1)+"-"+C(a.getDate())}function da(){f.safeMode=x(f.safeMode,!0);var a=f,c=f.domElementTypes,b=["*"];B(c)?(c=c.split(p.space),0===c.length&&(c=b)):c=Q(c)?c:b;a.domElementTypes=c;f.stText=w(f.stText,"st");f.ndText=w(f.ndText,"nd");f.rdText=w(f.rdText,"rd");f.thText=w(f.thText,"th");f.backButtonText=
w(f.backButtonText,"Back");f.nextButtonText=w(f.nextButtonText,"Next");f.refreshButtonText=w(f.refreshButtonText,"Refresh");f.exportButtonText=w(f.exportButtonText,"Export");f.lessText=w(f.lessText,"Less");f.moreText=w(f.moreText,"More");f.dateText=w(f.dateText,"Date");f.countText=w(f.countText,"Count");f.mapText=w(f.mapText,"Map");f.chartText=w(f.chartText,"Chart");M(f.monthNames,12)&&(f.monthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));M(f.dayNames,7)&&(f.dayNames="Mon Tue Wed Thu Fri Sat Sun".split(" "))}
function M(a,c){c=H(c)?c:1;return!Q(a)||a.length<c}var A=null,P=null,f={},p={empty:"",space:" ",newLine:"\n"},T={},K=null,h={};this.addDate=function(a,c,b,d){h.hasOwnProperty(a)&&(d=O(d)?d:!0,b=B(b)?b:"None",c=F(c),h[a].type.hasOwnProperty(b)||(h[a].type[b]={},h[a].types++),h[a].type[b].hasOwnProperty(c)||(h[a].type[b][c]=0),h[a].type[b][c]++,b=h[a].options,q(b.onAdd,b.currentView.element),d&&t(h[a].options));return this};this.removeDate=function(a,c,b,d){h.hasOwnProperty(a)&&(b=B(b)?b:"None",c=F(c),
h[a].type.hasOwnProperty(b)&&h[a].type[b].hasOwnProperty(c)&&(d=O(d)?d:!0,0<h[a].type[b][c]&&h[a].type[b][c]--,b=h[a].options,q(b.onRemove,b.currentView.element),d&&t(h[a].options)));return this};this.reset=function(a,c){if(h.hasOwnProperty(a)){c=O(c)?c:!0;var b=h[a].options;b.currentView.type="None";Y(a,b);q(b.onReset,b.currentView.element);c&&t(h[a].options)}return this};this.refresh=function(a){h.hasOwnProperty(a)&&(a=h[a].options,t(a),q(a.onRefresh,a.currentView.element));return this};this.refreshAll=
function(){for(var a in h)if(h.hasOwnProperty(a)){var c=h[a].options;t(c);q(c.onRefresh,c.currentView.element)}return this};this.setYear=function(a,c){if(h.hasOwnProperty(a)){var b=h[a].options;b.currentView.year=c;t(b);q(b.onSetYear,b.currentView.year)}return this};this.setYearToHighest=function(a){if(h.hasOwnProperty(a)){a=h[a].options;var c=h[a.currentView.element.id].type[a.currentView.type],b=0,d;for(d in c)c.hasOwnProperty(d)&&(b=Math.max(b,parseInt(d.split("-")[0])));0<b&&(a.currentView.year=
b,t(a),q(a.onSetYear,a.currentView.year))}return this};this.setYearToLowest=function(a){if(h.hasOwnProperty(a)){a=h[a].options;var c=h[a.currentView.element.id].type[a.currentView.type],b=9999,d;for(d in c)c.hasOwnProperty(d)&&(b=Math.min(b,parseInt(d.split("-")[0])));9999>b&&(a.currentView.year=b,t(a),q(a.onSetYear,a.currentView.year))}return this};this.getYear=function(a){var c=null;h.hasOwnProperty(a)&&(c=h[a].options.currentView.year);return c};this.render=function(a,c){V(W(c,a));return this};
this.renderAll=function(){U();return this};this.destroyAll=function(){for(var a in h)if(h.hasOwnProperty(a)){var c=h[a].options;c.currentView.element.innerHTML=p.empty;c.currentView.element.className=p.empty;q(c.onDestroy,c.currentView.element)}h={};return this};this.destroy=function(a){if(h.hasOwnProperty(a)){var c=h[a].options;c.currentView.element.innerHTML=p.empty;c.currentView.element.className=p.empty;q(c.onDestroy,c.currentView.element);delete h[a]}return this};this.setConfiguration=function(a){f=
L(a)?a:{};da();return this};this.getVersion=function(){return"1.5.0"};(function(a,c){A=a;P=c;da();A.addEventListener("DOMContentLoaded",function(){U()});v(P.$heat)||(P.$heat=this)})(document,window)})();